var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},CllickTouchScene=function(t){function e(){var e=t.call(this)||this;return e.curScoreCount=0,e.erroCount=0,e}return __extends(e,t),e.prototype.onAdd=function(){this.putImgList=[],this.imgList=[],this.copyList=[],this.rectList=[],this.curMoveIndex=-1,this.isCopy=!0,this._distance=new egret.Point,this.curPutinObj=new Object},e.prototype.initAddEvent=function(){for(var t=0,e=this.imgList;t<e.length;t++){var i=e[t];i&&i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this)}this.imgList[0].parent.addEventListener(egret.TouchEvent.TOUCH_END,this.touchImgEndEvent,this),this.imgList[0].parent.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveEvent,this)},e.prototype.clearImg=function(){for(var t=0,e=this.putImgList;t<e.length;t++){var i=e[t];if(i&&i.parent){for(;i.numChildren>0;)i.removeChildAt(0);i.parent.removeChild(i)}}for(var n=0,s=this.rectList;n<s.length;n++){var i=s[n];if(i&&i.parent){for(;i.numChildren>0;)i.removeChildAt(0);i.parent.removeChild(i)}}for(var r=0,o=this.imgList;r<o.length;r++){var i=o[r];if(i&&i.parent){for(;i.numChildren>0;)i.removeChildAt(0);i.parent.removeChild(i)}}for(var a=0,h=this.wenhaoAry;a<h.length;a++){var i=h[a];i&&i.parent&&i.parent.removeChild(i)}this.curImg&&this.curImg.parent&&this.curImg.parent.removeChild(this.curImg),this.rectList=[],this.imgList=[],this.putImgList=[],this.putImgList=[]},e.prototype.execMessage=function(t){},e.prototype.onDestroy=function(){this.removeAllEvt(),this.clearImg(),this.curAnswerData=null,this.wenhaoObj=null,this.putImgList=[],this.imgList=[],this.copyList=[],this.rectList=[],this.curMoveIndex=-1,this.isCopy=!0},e.prototype.getSiteIndexForGlobalPos=function(t,e){for(var i=this.globalToLocal(t,e),n=i.x,s=i.y,r=!1,o=0,a=this.rectList;o<a.length;o++){var h=a[o],l=this.rectList.indexOf(h);if(h&&(r=h.hitTestPoint(n,s)))return this.curHitIndex=l,r}return r},e.prototype.touchImgEndEvent=function(t){this.curMoveIndex>=0&&this.touchEndHanle()},e.prototype.touchEndHanle=function(){this.hit(),this.putImgList.push(this.curImg),this.curImg=null,this.isMove=!1,this.curMoveIndex=-1,this.isCopy=!0},e.prototype.hit=function(){var t=this.getSiteIndexForGlobalPos(this.curImg.x,this.curImg.y);if(t){var e=this.rectList[this.curHitIndex].name+this.curHitIndex,i=this.hitCurRectIndexObj[e],n=this.curAnswerData[i],s=this.rectList[this.curHitIndex].x,r=this.rectList[this.curHitIndex].y,o=new egret.Point(s,r);if(n){if(n==this.curImg)return this.curImg.x=this.rectList[this.curHitIndex].x,this.curImg.y=this.rectList[this.curHitIndex].y,void egret.log("同一个位置的同一个元素");for(var a in this.curAnswerData)if(this.curImg==this.curAnswerData[a]){this.curAnswerData[a]="",delete this.curAnswerData[a],n.parent.removeChild(n);break}egret.log("这个位置上已有元素")}else for(var a in this.curAnswerData)if(this.curImg==this.curAnswerData[a]){this.curAnswerData[a]="",delete this.curAnswerData[a];break}if(this.curImg.x=o.x,this.curImg.y=o.y,n){var h=n.x,l=n.y;h==this.curImg.x&&l==this.curImg.y&&n.parent&&n.parent.removeChild(n)}this.curImg.scaleX=this.curImg.scaleY=1,this.curAnswerData[i]=this.curImg}else{this.curImg&&this.curImg.parent&&this.curImg.parent.removeChild(this.curImg);for(var a in this.curAnswerData)if(this.curImg==this.curAnswerData[a]){this.curAnswerData[a]="",delete this.curAnswerData[a];break}}},e.prototype.touchMoveEvent=function(t){this.curMoveIndex>=0&&(this.curImg.x=t.stageX-this._distance.x,this.curImg.y=t.stageY-this._distance.y,this.isMove=!0)},e.prototype.onClickTouch=function(t){if(Game_Page1Scene.isGameBegin&&this.isCopy){var e=this.imgList.indexOf(t.currentTarget);e>=0&&(this.curImg||(this.clickIndex=e,this.curImg=this.copyImg(),this.curMoveIndex=1,this._distance.x=t.stageX-this.curImg.x,this._distance.y=t.stageY-this.curImg.y))}},e.prototype.touchImgBeginEvent=function(t){var e=this.copyList.indexOf(t.currentTarget);if(e>=0){var i=t.currentTarget;this.curMoveIndex=e,this.curImg=i,this.oldX=this.curImg.x,this.oldY=this.curImg.y,this._distance.x=t.stageX-i.x,this._distance.y=t.stageY-i.y,this.setCurImgChildIndex()}},e.prototype.setCurImgChildIndex=function(){this.curImg.parent&&this.curImg.parent.addChild(this.curImg)},e.prototype.copyImg=function(){this.scaleX;var t,e=this.imgList[this.clickIndex];if(e.texture){var i=e.texture;t=new eui.Image(i),t.x=e.x,t.y=e.y,t.anchorOffsetX=e.anchorOffsetX,t.anchorOffsetY=e.anchorOffsetY,t.rotation=e.rotation,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.name=e.name,e.parent.addChild(t)}else{t=new eui.Group;var n=new egret.TextField,s=e.$children[0];n.text=s.text,n.size=s.size,n.textAlign=egret.HorizontalAlign.CENTER,n.verticalAlign=egret.VerticalAlign.MIDDLE,n.strokeColor=16776960,n.fontFamily="ziti",t.width=t.height=n.width=n.height=s.width,t.addChild(n),e.parent.addChild(t),t.x=e.x,t.y=e.y,t.anchorOffsetX=t.anchorOffsetY=s.width/2,t.name=e.name}return this.isCopy=!1,this.copyList.push(t),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchImgBeginEvent,this),t},e.prototype.removeAllEvt=function(){for(var t=0,e=this.putImgList;t<e.length;t++){var i=e[t];i&&i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchImgBeginEvent,this),i&&i.parent&&i.parent.removeChild(i)}this.imgList[0]&&(this.imgList[0].parent.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchImgEndEvent,this),this.imgList[0].parent.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveEvent,this))},e}(UIObject);__reflect(CllickTouchScene.prototype,"CllickTouchScene");var zmovie;!function(t){var e=function(e){function i(t,i,n,s){void 0===n&&(n=null),void 0===s&&(s=1);var r=e.call(this)||this;return r.isPlay=!1,r.setMovieObject(t,i,n,s),r.addEventListener(egret.Event.REMOVED_FROM_STAGE,r.removeStageHandle,r),r.addEventListener(egret.Event.ADDED_TO_STAGE,r.addStageHandle,r),r}return __extends(i,e),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this.scaleX=Math.abs(this.scaleX)*this._direction},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{set:function(t){null==this.colorFlilter&&(this.colorFlilter=new egret.ColorMatrixFilter);var e=t>>16,i=t-(e<<16)>>8,n=t-(e<<16)-(i<<8),s=e/255;e=510*s-255,s=i/255,i=510*s-255,s=n/255,n=510*s-255;var r=[1,0,0,0,e,0,1,0,0,i,0,0,1,0,n,0,0,0,1,0];this.colorFlilter.matrix=r;var o=this.filters;if(null==o)o=[this.colorFlilter];else{for(var a=!1,h=o.length-1;h>=0;h--)if(o[h]==this.colorFlilter){a=!0;break}a||o.push(this.colorFlilter)}this.filters=o},enumerable:!0,configurable:!0}),i.getFrameMovieObject=function(t,e){return null==t.f_arr&&(t.f_arr=[]),t.f_arr.unshift(t),t},i.prototype.isMovie=function(){if(1<this.totalFrame)return!0;for(var t=this.numChildren-1;t>=0;t--)if(this.getChildAt(t)instanceof i){var e=this.getChildAt(t);if(e.isMovie())return!0}return!1},i.prototype.dispose=function(){this.stop(),null!=this.parent&&this.parent.removeChild(this)},i.prototype.formatScale=function(){if(this.isFormatScale=!0,null==this.stage)return void this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStageHandle,this);var t,e=this.mcObj.screenH;t=this.stage.stageWidth>this.stage.stageHeight?this.stage.stageHeight/e:this.stage.stageWidth/e,this.scaleX=t,this.scaleY=t},i.prototype.getTotalFrame=function(){return this.totalFrame},i.prototype.getCurrPlayLabel=function(){return this.currPlaylabel},i.prototype.getCurrFrame=function(){return this.currFrame},i.prototype.getIsPlay=function(){return this.isPlay},i.prototype.setTimeScale=function(t){0>=t&&(t=.01),this._timeScale=t,null!=this.mcObj&&(this.frameTime=this.mcObj.frameTime/t);for(var e=this.numChildren-1;e>=0;e--){var n=null;this.getChildAt(e)instanceof i&&(n=this.getChildAt(e)),null!=n&&n.setTimeScale(t)}if(!this.isPlay&&this.parent instanceof i){var s=this.parent;null!=s&&s.getTimeScale()!=this._timeScale&&s.getIsPlay()&&this.play()}},i.prototype.getTimeScale=function(){return this._timeScale},i.prototype.getLabels=function(){return this.mcObj.frameLabels},i.prototype.getIsExistLabel=function(t){return null!=this.mcObj.frameLabels&&null!=this.mcObj.frameLabels[t]?!0:!1},i.prototype.getCurrLabelObj=function(){var t=this.getLabels();if(null!=t)for(var e in t)if(this.currFrame>=t[e].begin){if(null!=t[e].end&&this.currFrame>=t[e].end)continue;return t[e]}return null},i.prototype.gotoAndPlayLabel=function(t,e){void 0===e&&(e=!1);var n;return null!=this.mcObj.frameLabels&&(n=this.mcObj.frameLabels[t],null!=n?(this.currPlaylabel=t,this.beginFrame=n.begin,null==n.end||e?this.endFrame=-1:this.endFrame=n.end-1,this.gotoAndPlay(this.beginFrame)):(this.beginFrame=0,this.endFrame=-1,this.currPlaylabel=null,this.gotoAndPlay(this.beginFrame)),this.dispatchEventWith(i.EVENT_GOTOANDPLAYLABEL,!1,t)),n},i.prototype.disposeLayerImg=function(){if(null!=this.layerArr)for(var t=this.layerArr.length-1;t>=0;t--){var e=this.layerArr[t].img;null!=e&&null!=e.parent&&e.parent.removeChild(e);var i=this.layerArr[t].mc;null!=i&&null!=i.parent&&i.parent.removeChild(i);var n=this.layerArr[t].sp;null!=n&&null!=n.parent&&n.parent.removeChild(n);var s=this.layerArr[t].li;null!=s&&null!=s.parent&&s.parent.removeChild(s)}},i.prototype.setMovieObject=function(t,e,n,s){void 0===s&&(s=1),null==n&&(n="root"),this.imgArr=t,this.libObj=e,this.mcName=n,this.mcObj=e.mcObjs[n],this.areaObj=this.mcObj.areaObject,this.libScale=1,this._direction=1,this.fmObj=this.mcObj.frameMoveObj,this.currFrame=-1,this.totalFrame=this.mcObj.totalFrame,this.frameTime=this.mcObj.frameTime,this.beginFrame=0,this.endFrame=-1,this._timeScale=1,this.isLoop=!0,this.disposeLayerImg(),this.parentCFOObj={},this.layerArr=new Array,this.currArea=null;for(var r=this.mcObj.layers,o=r.length,a=0;o>a;a++){for(var h=new Array,l=r[a],c=l.length,u=null,p=void 0,g=0;c>g;g++){var m=l[g],d=null;if(null==m.matrix){var f=m.frameNum;for(null!=m.igd||null==m.libName&&null!=u&&null!=m.x&&(m.libName=u.libName),null==m.a&&(m.a=1),null==m.b&&(m.b=0),null==m.c&&(m.c=0),null==m.d&&(m.d=1),null==m.al&&(m.al=1),null==m.cx?m.cx=0:m.cx*=-1,null==m.cy?m.cy=0:m.cy*=-1,null==m.r&&(m.r=0),null==m.sx&&(m.sx=1),null==m.sy&&(m.sy=1),(null!=m.scaleX||null!=m.scaleY||null!=m.scaleZ||null!=m.rotationX||null!=m.rotationY||null!=m.rotationZ)&&(d={},d.scaleX=m.scaleX,d.scaleY=m.scaleY,d.scaleZ=m.scaleZ,d.x=m.x,d.y=m.y,d.cx=m.cx,d.cy=m.cy,m.cx=0,m.cy=0,m.x=0,m.y=0,d.rotationX=m.rotationX,d.rotationY=m.rotationY,d.rotationZ=m.rotationZ,null==d.scaleX&&(d.scaleX=1),null==d.scaleY&&(d.scaleY=1),null==d.scaleZ&&(d.scaleZ=1),null==d.rotationX&&(d.rotationX=0),null==d.rotationY&&(d.rotationY=0),null==d.rotationZ&&(d.rotationZ=0)),m.matrix=new egret.Matrix(m.a,m.b,m.c,m.d,m.x,m.y),p=0;f>p;p++)i.getFrameMovieObject(m,p+1);for(var v in m)"filters"!=v&&"text"!=v&&"igd"!=v&&"id"!=v&&"maskID"!=v&&"op"!=v&&"mcName"!=v&&"matrix"!=v&&"al"!=v&&"libName"!=v&&"f_arr"!=v&&"cx"!=v&&"cy"!=v&&"r"!=v&&"sx"!=v&&"sy"!=v&&delete m[v];null!=d&&(m.obj3d=d)}h.push(m);var y=m.f_arr;if(null!=y)for(p=y.length-1;p>=0;p--)h.push(y[p]);u=m}this.layerArr.push({frames:h})}this.parentPlayTime=0,this.scaleNum=s,this.advanceTime()},i.prototype.nextFrame=function(){this.stop(),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},i.prototype.prevFrame=function(){this.stop(),this.currFrame-=2,-1>this.currFrame&&(this.currFrame=this.totalFrame-2),-1>this.currFrame&&(this.currFrame=-1),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},i.prototype.stopChild=function(){this.childStop=!0,this.stop()},i.prototype.playChild=function(){this.childStop=!1,this.play()},i.prototype.stop=function(){if(this.isPlay){this.isPlay=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var t=this.numChildren-1;t>=0;t--)if(this.getChildAt(t)instanceof i){var e=this.getChildAt(t);e.stop()}}},i.prototype.play=function(){if(!this.childStop&&!this.isPlay){this.isPlay=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var t=this.numChildren-1;t>=0;t--)if(this.getChildAt(t)instanceof i){var e=this.getChildAt(t);(this.mcObj.frameTime!=e.mcObj.frameTime||e.getTimeScale()!=this._timeScale)&&e.play()}}},i.prototype.gotoAndStop=function(t){this.stop(),this.currFrame=t-1,this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},i.prototype.gotoAndPlay=function(t){this.currFrame=t-1,this.parentPlayTime=0,this.advanceTime(),this.play()},i.prototype.advanceTime=function(){var e=(new Date).getTime();if(this.frameTime<e-this.parentPlayTime){if(this.parentMask=null,this.parentPlayTime=e,this.currFrame++,this.currFrame>=this.totalFrame||-1!=this.endFrame&&this.currFrame>this.endFrame){if(!this.isLoop)return this.currFrame-=1,this.stop(),void this.frameComplete();if(this.frameComplete(),!this.isPlay)return;this.currFrame=this.beginFrame}for(var n=void 0,s=this.layerArr.length,r=0;s>r;r++)try{var o=this.layerArr[r],a=o.frames,h=void 0,l=null,c=null,u=null,p=null,g=null;o.img instanceof t.ZImage&&(l=o.img),o.mc instanceof i&&(c=o.mc),o.li instanceof t.LargeImage&&(u=o.li),o.sp instanceof ZShap&&(p=o.sp),o.tf instanceof ZTextField&&(g=o.tf);try{if(h=a[this.currFrame],this.parentCFOObj[r]==h||null==h){null==c||null==c.parent||this.mcObj.frameTime!=c.mcObj.frameTime||this._timeScale!=c.getTimeScale()||c.childStop||c.nextFrame();continue}this.parentCFOObj[r]=h}catch(m){null!=l&&this==l.parent&&this.removeChild(l),null!=c&&null!=c.parent&&(c.stop(),c.parent.removeChild(c)),null!=u&&this==u.parent&&this.removeChild(u);continue}if(null==h.libName){if(null!=h.igd)null==p&&(p=new ZShap,p.touchEnabled=!1,o.sp=p),p.img_depth=r,p.draw(h.igd),this.addChildToDepth(p);else if(null!=h.text){var d=h.text,f=d.tf;null==g?g=new ZTextField(d.val,f.size,f.color,d.w,f.bold,f.font,d.farr,f.leading,d.h,!1,d):g.text=d.val,g.matrix=h.matrix,g.touchEnabled=this.touchEnabled,g.img_depth=r,this.addChildToDepth(g)}null!=l&&this==l.parent&&this.removeChild(l),null!=c&&null!=c.parent&&(c.stop(),c.parent.removeChild(c)),null!=u&&this==u.parent&&this.removeChild(u)}else{null!=p&&this==p.parent&&this.removeChild(p),null!=g&&this==g.parent&&this.removeChild(g);var v=t.Util.getTextureByName(this.imgArr,h.libName);if(null==v){var y=void 0;null==this.libObj.mcObjs[h.libName]?(null==u?(u=new t.LargeImage(this.imgArr,this.libObj,h.libName),u.touchEnabled=!1,o.li=u,u.img_depth=r):u.setObject(this.imgArr,this.libObj,h.libName),y=u,u.matrix=h.matrix,null==u.parent&&this.addChildToDepth(u),null!=c&&this==c.parent&&(this.removeChild(c),c.visible=!1)):(null==c?(c=new i(this.imgArr,this.libObj,h.libName),c.touchEnabled=!1,o.mc=c,c.img_depth=r):h.libName!=c.mcName&&c.setMovieObject(this.imgArr,this.libObj,h.libName),y=c,null==c.parent?(this.isPlay?this.mcObj.frameTime==c.mcObj.frameTime?c.gotoAndStop(0):c.gotoAndPlay(0):c.gotoAndStop(0),c.setTimeScale(this._timeScale),this.addChildToDepth(c)):this.mcObj.frameTime!=c.mcObj.frameTime||c.childStop||c.nextFrame(),this==c.parent&&(c.matrix=h.matrix),null!=u&&this==u.parent&&this.removeChild(u)),y.anchorOffsetX=h.cx,y.anchorOffsetY=h.cy,y.alpha=h.al,null!=l&&this==l.parent&&this.removeChild(l)}else null==l?(l=new t.ZImage(v),l.img_depth=r,l.touchEnabled=!1,o.img=l):l.setTexture(v),null!=this.libObj.imgP&&l.setP(this.libObj.imgP[h.libName]),null!=this.libObj.imgScale&&null!=this.libObj.imgScale[h.libName]?l.setScale(this.libObj.scale*this.libObj.imgScale[h.libName]):l.setScale(this.libObj.scale),l.displayLibName=h.libName,l.matrix=h.matrix,l.anchorOffsetX=h.cx,l.anchorOffsetY=h.cy,l.alpha=h.al,null==l.parent&&this.addChildToDepth(l),null!=c&&null!=c.parent&&(c.stop(),c.parent.removeChild(c)),null!=u&&this==u.parent&&this.removeChild(u)}var _=null;if(null!=g&&null!=g.parent?_=g:null!=l&&null!=l.parent?_=l:null!=c&&null!=c.parent?_=c:null!=u&&null!=u.parent?_=u:null!=p&&null!=p.parent&&(_=p),null!=_){if(null!=h.filters)try{_.filters=t.Util.getFilters(h.filters)}catch(m){}if(null!=this.parentMask&&(_.mask=this.parentMask,--this.parentMaskI,0>=this.parentMaskI&&(this.parentMask=null)),null!=this.mcObj.maskObj){var C=this.mcObj.maskObj;_.parent==this&&(C=C[this.currFrame],null!=C&&(C=C[this.getChildIndex(_)],null!=C&&(this.parentMask=_,this.parentMaskI=C.num)))}if(null!=h.maskID){if(null!=n&&null!=n[h.maskID]&&null==_.parent.mask){var x=n[h.maskID],P=new egret.Rectangle(x.x,x.y,x.width,x.height);_.parent.mask=P}}else null!=h.id&&(null==n&&(n={}),n[h.id]=_,_.visible=!1);null!=h.mcName&&(_.name=h.mcName,this.dispatchEventWith(i.EVENT_MC_NAME,!1,_))}}catch(m){}if(null!=this.fmObj){var A=this.fmObj[this.currFrame];null!=A&&(null==A[this._scale]&&(A[this._scale]={},A[this._scale].x=A.x*this._scale,A[this._scale].y=A.y*this._scale,A[this._scale].moveType=A.moveType),this.dispatchEventWith(i.EVENT_MOVE,!1,A[this._scale]))}this.framePlay()}},i.prototype.removeStageHandle=function(t){this.stop()},i.prototype.addStageHandle=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageHandle,this),this.isFormatScale&&this.formatScale(),null==t.Util.stage&&t.Util.setStage(this.stage)},i.prototype.frameComplete=function(){this.dispatchEventWith(i.EVENT_FRAME_COMPLETE,!1)},i.prototype.framePlay=function(){null!=this.areaObj&&(this.currArea=this.areaObj[this.currFrame],null!=this.currArea&&this.dispatchEventWith(i.EVENT_AREA,!1,this.currArea)),this.dispatchEventWith(i.EVENT_ENTER_FRAME)},i.prototype.addChildToDepth=function(t){var e=this.numChildren;if(0==e)return void this.addChild(t);for(var i=e-1;i>=0;i--)try{var n=this.getChildAt(i);if(null!=n&&n.img_depth<t.img_depth)return void(e==i?this.addChild(t):this.addChildAt(t,i+1))}catch(s){}this.addChildAt(t,0)},i.EVENT_FRAME_COMPLETE="zframeComplete",i.EVENT_MOVE="move",i.EVENT_ENTER_FRAME="zenterFrame",i.EVENT_MC_NAME="mcName",i.EVENT_AREA="area",i.EVENT_GOTOANDPLAYLABEL="gotoAndPlayLabel",i}(egret.DisplayObjectContainer);t.ZMovieClip=e,__reflect(e.prototype,"zmovie.ZMovieClip")}(zmovie||(zmovie={}));var UserInfoView=function(t){function e(){var e=t.call(this)||this;return e.skinName="UserInfoView_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.initScene(),this.initAddEvent()},e.prototype.onDestroy=function(){this.clearEvt(),this.sexGpAry=[],this.curSexNum=-1,this.parent&&egret.MainContext.instance.stage.removeChild(this)},e.prototype.initScene=function(){this.curSexNum=-1,this.sexGpAry=[],this.sexGpAry.push(this.sexgp_2),this.sexGpAry.push(this.sexgp_1),this.sex_1.fontFamily="ziti",this.sex_2.fontFamily="ziti",this.showText()},e.prototype.initAddEvent=function(){for(var t=0,e=this.sexGpAry;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickSexHand,this)}this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnComitBegin,this),egret.MainContext.instance.stage.addEventListener(GlobalEvent.evt,this.httpMsgRetun,this)},e.prototype.clickSexHand=function(t){for(var e=0,i=this.sexGpAry;e<i.length;e++){var n=i[e];if(this.curSexNum=this.sexGpAry.indexOf(n),n){var s=n.$children[0],r=n.$children[1];r.textColor=11513775,s.visible=!1}}var o=t.currentTarget,a=o.$children[0],h=o.$children[1];h.textColor=16777215,a.visible=!0,this.tips_2.text=""},e.prototype.showText=function(){for(var t=0;2>t;t++){this["label_"+t]=new egret.TextField;var e=this["label_"+t];e.fontFamily="ziti",e.text="",e.type=egret.TextFieldType.INPUT,e.width=241,e.height=41,e.name="label_"+t,e.maxChars=14,e.size=30,e.textColor=39168,e.textAlign=egret.HorizontalAlign.CENTER,e.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(e),e.x=this["img_"+t].x,e.y=this["img_"+t].y,1==t?(e.maxChars=8,e.type=egret.TextFieldType.INPUT,e.textColor=11513775,e.text="格式19930501",e.restrict="0-9"):e.maxChars=6,e.addEventListener(egret.TouchEvent.FOCUS_IN,this.txtFocusInEvt,this),e.addEventListener(egret.TouchEvent.FOCUS_OUT,this.txtFocusOutEvt,this),e.addEventListener(egret.Event.CHANGE,this.txtChangeEvt,this)}},e.prototype.txtFocusInEvt=function(t){var e=t.currentTarget,i=e.name;switch(i){case"label_0":this.tips_0.text="";break;case"label_1":this.tips_1.text="","格式19930501"==this.label_1.text&&(this.label_1.text="",this.label_1.textColor=39168)}},e.prototype.txtFocusOutEvt=function(t){var e=t.currentTarget,i=e.name;switch(i){case"label_0":break;case"label_1":""==this.label_1.text&&(this.label_1.text="格式19930501",this.label_1.textColor=11513775)}},e.prototype.txtChangeEvt=function(t){var e=t.currentTarget;e.name},e.prototype.clickBtnComitBegin=function(){if(this.curlongitude="",this.curlatitude="",this.curlocation="",this.cheackInputTxt()&&this.cheackBirth()){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.onSuccess,this.onError):alert("您的浏览器不支持使用HTML 5来获取地理位置服务");var t=new Date(this.curBirthDate),e=t.getTime(),i=new Object;i.deviceId=Main.devId,i.name=this.label_0.text,i.birthday=e,i.sex=this.curSexNum,i.longitude=this.curlongitude,i.latitude=this.curlatitude,i.location=this.curlocation,HttpControl.getInstance().sendMsgUserInfo(i)}},e.prototype.cheackInputTxt=function(){var t=!1;return""==this.label_0.text?void(this.tips_0.text="请填写宝宝昵称"):-1==this.curSexNum?void(this.tips_2.text="请选择宝宝性别"):"格式19930501"==this.label_1.text?void(this.tips_1.text="请填写宝宝生日"):t=!0},e.prototype.httpMsgRetun=function(t){},e.prototype.cheackBirth=function(){var t=!1,e=this.label_1.text,i=e.substring(0,4),n=e.substring(4,6),s=e.substring(6,8),r=i+"-"+n+"-"+s;this.curBirthDate=r;var o=ConfigDataJson.getInstance().getAge(r),a=o.split(":");if(2==a.length||3==a.length){var h=parseInt(a[1]);h=6>h?0:.5,o=parseFloat(a[0]+"."+a[1])}return o>=2.5&&7>=o?(t=!0,ConfigDataJson.getInstance().age=o):2.5>o||o>7?(o="此测试只针对2.5至7周岁的儿童",this.tips_1.text=o,t=!1):(this.tips_1.text=o,t=!1),t},e.prototype.onSuccess=function(t){this.curlongitude=t.coords.latitude,this.curlatitude=t.coords.longitude},e.prototype.onError=function(t){switch(t.code){case t.PERMISSION_DENIED:break;case t.POSITION_UNAVAILABLE:break;case t.TIMEOUT:break;case t.UNKNOWN_ERROR:}},e.prototype.clearEvt=function(){for(var t=0,e=this.sexGpAry;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickSexHand,this)}this.btn_ok.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnComitBegin,this),egret.MainContext.instance.stage.removeEventListener(GlobalEvent.evt,this.httpMsgRetun,this)},e}(UIObject);__reflect(UserInfoView.prototype,"UserInfoView");var ConfigDataJson=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.totalTime=0,e.totalScore=0,e.rightCount=0,e.erroCount=0,e}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getData=function(){return this.CustomsData},e.prototype.getStudyLevel=function(t,e){var i=0;return t>2.5&&3>t?e>0&&1>=e?i=1:e>=2&&3>=e?i=0:e>=4&&7>=e?i=0:e>=8&&14>=e?i=0:e>14&&(i=0):t>=3&&4>t?e>0&&1>=e?i=2:e>=2&&3>=e?i=1:e>=4&&7>=e?i=1:e>=8&&14>=e?i=1:e>14&&(i=1):t>=4&&5>t?e>0&&1>=e?i=3:e>=2&&3>=e?i=2:e>=4&&7>=e?i=2:e>=8&&14>=e?i=1:e>14&&(i=1):t>=5&&6>t?e>0&&1>=e?i=3:e>=2&&3>=e?i=2:e>=4&&7>=e?i=2:e>=8&&14>=e?i=1:e>14&&(i=1):t>=6&&7>t&&(e>0&&1>=e?i=3:e>=2&&3>=e?i=2:e>=4&&7>=e?i=2:e>=8&&14>=e?i=2:e>14&&(i=2)),i},e.prototype.getAge=function(t){var e=t.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})/);if(null==e)return"日期错误";var i=new Date(e[1],e[3]-1,e[4]),n="输入的日期格式错误！";if(i.getFullYear()==e[1]&&i.getMonth()+1==e[3]&&i.getDate()==e[4]){var s=new Date,r=s.getFullYear(),o=s.getMonth()+1,a=s.getDate(),h=[1,3,5,7,8,10,12],l=o-1>0?o-1:12,c=!1,u=0;(r%4===0&&r%100!==0||r%400===0)&&(c=!0),u=h.indexOf(l)>-1?31:2===l?c?29:28:30;var p=r-parseInt(e[1]),g=o-parseInt(e[3]),m=a-parseInt(e[4]);0>m&&(m+=u,g--),0>g&&(p--,g+=12),n=0>p?"出生日期有误！":0===p?0===g?m+":":g+":":0===g?p+":":p+":"+g+":"}return n},e.prototype.getOption=function(t){if(window.location.href){var e=window.location.href,i=e.split("?");if(!i[1])return"";for(var n=i[1].split("&"),s=n.length,r=0;s>r;r++){var o=n[r],a=o.split("=");if(a[0]==t)return a[1]}}return""},e.prototype.setAge=function(t){var e=new Date(parseInt(t)),i=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",s=e.getDate()+" ",r=(e.getHours()+":",e.getMinutes()+":",e.getSeconds(),i+n+s);this.age=this.countAge(r)},e.prototype.countAge=function(t){var e=t.split("-"),i=e[0],n=e[1],s=e[2],r=i+"-"+n+"-"+s,o=this.getAge(r),a=o.split(":");if(2==a.length||3==a.length){var h=parseInt(a[1]);h=6>h?0:.5,o=parseFloat(a[0]+"."+a[1])}return o},e.prototype.checkMobile=function(t){var e=t;return/^1[3|4|5|8][0-9]\d{4,8}$/.test(e)?!0:!1},e.prototype.showHttpSendWait=function(t){var e="";switch(t){case"code":e="验证码和获取中";break;case"login":e="正在登陆中";break;case"review":e="获取评测结果";break;case"UserInfo":e="进入游戏中";break;case"studyInfo":e="学习记录同步中"}WaitManager.getInstance().showWaritPanel(e)},e.prototype.getWifiStatus=function(){return getAppWifiStatus()},e.prototype.sendSaveRequest=function(t){return sendJsSave(t)},e.prototype.sendQuitGameMsg=function(){callAppKeyEvent()},e.prototype.senStudydMsg=function(t){var i=JSON.stringify(t);return egret.log("wifi状态："+e.getInstance().getWifiStatus()),egret.log("学习数据："+i),e.getInstance().getWifiStatus()?void HttpControl.getInstance().sendStudyInfo(i):(e.getInstance().sendSaveRequest(i),void("true"==this.isQuit&&e.getInstance().sendQuitGameMsg()))},e}(UIObject);__reflect(ConfigDataJson.prototype,"ConfigDataJson");var Game_Page1Scene=function(t){function e(){var e=t.call(this)||this;return e.levelNum=2,e.curQuindex=0,e.countTotalTime=30,e.skinName="Game_Page1Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.initScence()},e.prototype.onDestroy=function(){egret.Tween.removeAllTweens(),this.stopTime(),this.curGameContrl.setGameOverData(),this.curGameContrl.onDestroy(),CommonDragonBones.getInstance().dragondestroy(),this.clearMc(),CommonSoundManage.getInstance().stopAllSound(),this.anNumAry=[],this.quNumAry=[],this.anPos=[],this.quPos=[],this.jtAry=[],this.curSelectAry=[],this.countImg=[]},e.prototype.touchBeginMakedItemEvent=function(t){},e.prototype.ChangeEvent=function(t){ConfigDataJson.getInstance().isPlay=!1,this.playCountdownAnimation()},e.prototype.initScence=function(){this.initData(),this.init(),this.initImgEvent()},e.prototype.clearTimeImg=function(){egret.Tween.removeAllTweens(),this.timer.reset(),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.fuc,this);for(var t=0,e=this.countImg;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}this.countImg=[]},e.prototype.initData=function(){this.anNumAry=[],this.quNumAry=[],this.anPos=[],this.quPos=[],this.jtAry=[],this.curSelectAry=[],this.countImg=[],this.txt_input.inputType="ziti",this.txt_input.restrict="A-Z 0-9",this.txt_input.textDisplay.size=23,this.curQuindex=0,this.loadConfig(),this.time_txt_0.fontFamily="ziti",this.time_txt_0.textColor=16316671;var t=Date.parse(new Date+"");ConfigDataJson.getInstance().startTime=t},e.prototype.onResourceMp3LoadComplete=function(){egret.log("加载声音完毕")},e.prototype.onResUI_1_LoadComplete=function(){egret.log("UI1完毕")},e.prototype.loadConfig=function(){var t="resource/config.json",e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXT,e.addEventListener(egret.Event.COMPLETE,this.onConfComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onConfComplete,this);var i=new egret.URLRequest(t);i.method=egret.URLRequestMethod.GET,e.load(i)},e.prototype.initImgEvent=function(){this.test_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.testgameOver,this),this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showResult,this),this.gp_ok.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameOver,this),this.parent.stage.addEventListener(SoundCompleteEvent.data,this.ChangeEvent,this),this.addEventListener(GlobalEvent.evt,this.CountScoreEvt,this),this.parent.stage.addEventListener("jsNotifyts",this.doQuitMethod,this)},e.prototype.doQuitMethod=function(t){egret.ticker.pause(),this.parent.stage.removeEventListener("jsNotifyts",this.doQuitMethod,this);JSON.parse(t.eventPhase);egret.log("退出游戏："),ConfigDataJson.getInstance().isQuit="true",this.upLoadStudyData()},e.prototype.upLoadStudyData=function(){var t=new Object,e=(ConfigDataJson.getInstance().CustomsData.power[0],Date.parse(new Date+""));this.curSelectAry[this.curQuindex]?(t.number="L0000",t.type=0,t.startTime=ConfigDataJson.getInstance().startTime,t.endTime=e,ConfigDataJson.getInstance().senStudydMsg(t)):1!=ConfigDataJson.getInstance().isUploadData&&ConfigDataJson.getInstance().sendQuitGameMsg()},e.prototype.CountScoreEvt=function(t){t.b?ConfigDataJson.getInstance().rightCount++:ConfigDataJson.getInstance().erroCount++;var e=this.curTime-this.countTotalTime;ConfigDataJson.getInstance().totalTime+=e},e.prototype.test=function(){this.loginVew=new LoginView,this.addChild(this.loginVew),this.onDestroy(),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.test,this)},e.prototype.showResult=function(){CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.curGameContrl.showGameOverData()},e.prototype.gameOver=function(t){e.isGameBegin&&(this.stopTime(),this.curGameContrl.setGameOverData(),this.curGameContrl.onDestroy(),this.curSelectAry[this.curQuindex]?this.startRandomQues():(this.EndView=new EndView,this.addChild(this.EndView)))},e.prototype.testgameOver=function(){var t=parseInt(this.txt_input.text);""!=this.txt_input.text&&t>=1&&96>=t&&(this.curQuindex=t-1,this.gameOver(null))},e.prototype.init=function(){var t=CommonDragonBones.getInstance().getMoviclip("okbtn");t.x=this.gp_ok.x,t.y=this.gp_ok.y,t.play(-1),this.addChild(t)},e.prototype.timeControl=function(){this.timer=new egret.Timer(1e3),this.curTime=this.countTotalTime,this.timer.addEventListener(egret.TimerEvent.TIMER,function t(){if(this.fuc=t,this.countTotalTime--,19==this.countTotalTime?this.time_txt_0.textColor=16776960:9==this.countTotalTime&&(this.time_txt_0.textColor=13907211),this.time_txt_0.text=this.countTotalTime.toString(),0==this.countTotalTime){var e=this.curTime-this.countTotalTime;return ConfigDataJson.getInstance().totalTime+=e,ConfigDataJson.getInstance().erroCount++,this.timer.removeEventListener(egret.TimerEvent.TIMER,t,this),this.timer.stop(),this.timer.reset(),void this.gameOver(null)}},this),this.timer.start()},e.prototype.playCountdownAnimation=function(){this.djsAn=this.getMc("djs"),this.djsAn.play(),this.addChild(this.djsAn),e.isGameBegin=!1,this.djsAn.addEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.completeZmovieAct,this)
},e.prototype.completeZmovieAct=function(t){var i=t.currentTarget;i.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.completeZmovieAct,this),i.gotoAndStop(0),e.isGameBegin=!0,this.timeControl(),this.begin_mask.visible=!1},e.prototype.getMc=function(t,e){void 0===e&&(e=0);var i,n,s=t;0==e?(i=s+"_0_json",n=s+"_json"):1==e?(i=s+"_1_json",n=s+"_json"):10==e&&(i=s+"0_json",n=s+"_json");var r=new zmovie.ZMovieClip(i,RES.getRes(n));return"djs"==s?(r.gotoAndStop(0),r.x=512,r.y=300,r.isLoop=!1,r.scaleX=r.scaleY=.2,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2):r.play(),r},e.prototype.getQus=function(t){var e=[],i=ConfigDataJson.getInstance().CustomsData.GameNumber,n=ConfigDataJson.getInstance().CustomsData.GameConfig,s=JSON.parse(JSON.stringify(i)),r=JSON.parse(JSON.stringify(n)),o=0;if(3>t)o=0;else if(t>=3&&3.5>t)o=1;else if(t>=3.5&&4>t)o=2;else if(t>=4&&5>t)o=3;else if(t>=5&&6>t)o=4;else if(t>=6&&7>t)o=5;else if(t>=7&&8>t)o=6;else{if(!(t>=8))return[];o=7}s=s[o].num.split(" ");for(var a=0,h=s;a<h.length;a++)for(var l=h[a],c=(s.indexOf(l),0),u=r;c<u.length;c++){var p=u[c],g=r.indexOf(p),m=r[g].condition_id;l==m&&e.push(p)}return e},e.prototype.startRandomQues=function(){if(this.curSelectAry||(this.curSelectAry=[]),this.op_bg.visible=!0,0==this.curSelectAry.length&&(egret.log("当前年龄:  "+ConfigDataJson.getInstance().age),this.curSelectAry=this.getQus(ConfigDataJson.getInstance().age)),this.curSelectAry.length>0){if(!this.curSelectAry[this.curQuindex]){this.visible=!1,this.onDestroy();var t=new EndView;return void this.addChild(t)}this.curGameData=this.curSelectAry[this.curQuindex],this.curQuindex++,this.testurl.text="游戏ID: "+this.curGameData.condition_id,this.time_txt_0.text=this.curGameData.timeout,this.countTotalTime=parseInt(this.curGameData.timeout),this.curMp3Name=this.curGameData.condition_id+"_mp3",CommonSoundManage.getInstance().stopAllSound(),CommonSoundManage.getInstance().playSoundReturn(this.curMp3Name),this.doBuildGameData(),this.addChild(this.begin_mask),this.begin_mask.visible=!0}},e.prototype.doBuildGameData=function(){var t=this.curGameData.Game_type;switch(t){case"找规律":this.curGameContrl=new GameType1Control(this);break;case"数规律":this.curGameContrl=new GameType2Control(this);break;case"分类哪个多":this.curGameContrl=new GameType3Control(this);break;case"逻辑":this.curGameContrl=new GameType4Control(this);break;case"图形规律":this.curGameContrl=new GameType5Control(this);break;case"拼图":this.curGameContrl=new GameType6Control(this);break;case"排序":this.curGameContrl=new GameType7Control(this);break;case"数学":this.curGameContrl=new GameType8Control(this);break;case"":}},e.prototype.showQuestionsView=function(){this.curGameContrl&&this.curGameContrl.showQuestionsView()},e.prototype.onConfComplete=function(t){if("complete"==t.type){var e=t.target;e.data;e.removeEventListener(egret.Event.COMPLETE,this.onConfComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onConfComplete,this),ConfigDataJson.getInstance().CustomsData=JSON.parse(e.data),this.startRandomQues()}},e.prototype.testSound=function(){CommonSoundManage.getInstance().panelSoundAry=["d1_mp3","10_mp3","d4_mp3","d2_mp3","20_mp3","d3_mp3"],CommonSoundManage.getInstance().playPanelEffect()},e.prototype.clearMc=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}this.quNumAry=[],this.rightNum=[]},e.prototype.stopTime=function(){egret.Tween.removeAllTweens(),this.timer&&(this.timer.reset(),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.fuc,this)),this.djsAn&&this.djsAn.dispose()},e.prototype.clearRemoveAllEvt=function(){CommonSoundManage.getInstance().removeEventListener(SoundCompleteEvent.data,this.ChangeEvent,this)},e.key="Game_Page1Scene",e}(UIObject);__reflect(Game_Page1Scene.prototype,"Game_Page1Scene");var GameType1Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.curAnswerData=new Object,this.hitCurRectIndexObj=new Object,this.wenhaoObj=new Object,this.rigtData=new Object;for(var t=0;18>t;t++)this.selfParent["r_"+t].visible=!1,6>t?this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)):this.quPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.quNumAry;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.opNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.wenhaoAry;a<h.length;a++){var s=h[a];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}i!=n&&(t=!1)}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var s=new GlobalEvent(GlobalEvent.evt);s.b=t,this.selfParent.dispatchEvent(s)},e.prototype.showGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}i!=n&&(t=!1)}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},e.prototype.onDestroy=function(){this.clearAll(),t.prototype.onDestroy.call(this),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.rigtData=null,this.wenhaoObj=null,this.hitCurRectIndexObj=null},e.prototype.creatImg=function(){for(var t,e,i=this.curGameData.condition_id,n=this.curGameData.answer.split(","),s=n[0],r=this.curGameData.quetion.split(","),o=this.creatRandomAry(),a=[],h=1,l=0;l<r.length;l++){"?"==r[l]?(e=parseInt(n[h]),h++):e=parseInt(r[l]);var c=e-1;t=o[c];var u=s+t;("11"==i||"12"==i)&&(u=s+e);var p=void 0,g=void 0,m=this.quPos[l];if("?"==r[l]){var d=CommonDragonBones.getInstance().getDrgoneDisplay("wen");d.animation.play(1),d.x=this.quPos[l].x,d.y=this.quPos[l].y,this.wenhaoAry.push(d),this.wenhaoObj[""+l]=d,g=new eui.Rect,g.fillAlpha=0,g.name=u,g.width=d.width,g.height=d.height,g.anchorOffsetX=d.width/2,g.anchorOffsetY=d.height/2,g.x=m.x,g.y=m.y,a.push(g);var f=u+(a.length-1);this.hitCurRectIndexObj[f]=""+l,this.rigtData[""+l]=g}else p=CommonDragonBones.getInstance().getElementImg(u),p.x=m.x,p.y=m.y,this.quNumAry.push(p)}o=this.getRandomAry(o);for(var v=0,y=o;v<y.length;v++){var _=y[v],C=o.indexOf(_),u=s+_,x=CommonDragonBones.getInstance().getElementImg(u);x.x=this.opPos[C].x,x.y=this.opPos[C].y,this.opNumAry.push(x)}this.imgList=this.opNumAry,this.rectList=a,this.showQuestionsView()},e.prototype.creatRandomAry=function(){for(var t=this.selfParent.curGameData.opertion.split(","),e=(parseInt(t[0]),parseInt(t[1])+1),i=[],n=1;e>n;n++)i.push(n);return i=this.getRandomAry(i)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}for(var r=0,o=this.wenhaoAry;r<o.length;r++){var i=o[r];i&&i.parent&&i.parent.removeChild(i)}this.clearImg()},e}(CllickTouchScene);__reflect(GameType1Control.prototype,"GameType1Control");var GameType2Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.curAnswerData=new Object,this.wenhaoObj=new Object,this.rigtData=new Object,this.hitCurRectIndexObj=new Object;for(var t=0;26>t;t++)this.selfParent["r_"+t].visible=!1,6>t?this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)):t>17&&this.quPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.quNumAry;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.opNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.wenhaoAry;a<h.length;a++){var s=h[a];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var s=new GlobalEvent(GlobalEvent.evt);s.b=t,this.selfParent.dispatchEvent(s)},e.prototype.showGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.rigtData=null,this.wenhaoObj=null,this.hitCurRectIndexObj=null},e.prototype.creatImg=function(){var t,e,i=this.curGameData.answer.split(","),n=i[0],s=this.curGameData.quetion.split(","),r=this.creatRandomAry(),o=[],a=0,h=parseInt(this.curGameData.condition_id);15>h&&h>12&&(a=1);for(var l,c,u,p=0;p<s.length;p++){h>=15?"?"==s[p]?(l=i[a],a++):l=s[p]:("?"==s[p]?(e=parseInt(i[a]),a++):e=parseInt(s[p]),l=n+e);var g=this.quPos[p];if(egret.log("name   "+t),"?"==s[p]){var m=CommonDragonBones.getInstance().getDrgoneDisplay("wen");m.animation.play(1),m.x=this.quPos[p].x,m.y=this.quPos[p].y,this.wenhaoAry.push(m),this.wenhaoObj[""+p]=m,u=new eui.Rect,u.fillAlpha=0,u.name=l,u.width=80,u.height=80,u.anchorOffsetX=m.width/2,u.anchorOffsetY=m.height/2,u.x=g.x,u.y=g.y,o.push(u),this.rigtData[""+p]=u;var d=l+(o.length-1);this.hitCurRectIndexObj[d]=""+p}else if(h>=15){var f=new eui.Group,v=new egret.TextField;v.text=s[p],v.size=65,v.textAlign=egret.HorizontalAlign.CENTER,v.verticalAlign=egret.VerticalAlign.MIDDLE,v.strokeColor=16776960,v.fontFamily="ziti",f.width=f.height=v.width=v.height=120,f.addChild(v),this.selfParent.addChild(f),f.x=g.x,f.y=g.y,f.name=l,f.anchorOffsetX=f.anchorOffsetY=f.width/2,this.quNumAry.push(f)}else c=CommonDragonBones.getInstance().getElementImg(l),c.x=g.x,c.y=g.y,this.quNumAry.push(c)}r=h>=15?this.getRandomAry(this.curGameData.opertion.split(",")):this.getAppointNumAry(r);for(var y=0,_=r;y<_.length;y++){var C=_[y],x=r.indexOf(C),P=n+C;if(h>=15){var f=new eui.Group,v=new egret.TextField;v.text=r[x],v.size=50,v.textAlign=egret.HorizontalAlign.CENTER,v.verticalAlign=egret.VerticalAlign.MIDDLE,v.strokeColor=16776960,v.fontFamily="ziti",f.width=f.height=v.width=v.height=120,f.addChild(v),this.selfParent.addChild(f),f.x=this.opPos[x].x,f.y=this.opPos[x].y,f.anchorOffsetX=f.anchorOffsetY=f.width/2,f.name=C,this.opNumAry.push(f)}else{var A=CommonDragonBones.getInstance().getElementImg(P);A.x=this.opPos[x].x,A.y=this.opPos[x].y,this.opNumAry.push(A)}}this.imgList=this.opNumAry,this.rectList=o,this.showQuestionsView()},e.prototype.copyNewobj=function(t){var e=new eui.Rect;return e.fillAlpha=0,e.name=t.name,e.width=t.width,e.height=t.height,e.anchorOffsetX=t.width/2,e.anchorOffsetY=t.height/2,e.x=t.x,e.y=t.y,e},e.prototype.getAppointNumAry=function(t){for(var e=t,i=[],n=this.curGameData.answer.split(","),s=1;s<n.length;s++)i.push(n[s]);for(var r=this.selfParent.curGameData.opertion.split(","),o=(parseInt(r[1]),6-i.length),a=e.length;a>0;){for(var h=0,l=i;h<l.length;h++){var c=l[h],u=a-1;c==e[u]&&e.splice(u,1)}a--}for(egret.log(e.length);o>0;){var p=App.RandomUtils.limitInteger(0,o-1);i.push(e[p]),e.splice(p,1),o--}for(var g=i.length,m=[];g>0;){var p=App.RandomUtils.limitInteger(0,i.length-1);m.push(i[p]),i.splice(p,1),g--}return egret.log(m.length),m},e.prototype.creatRandomAry=function(){for(var t=this.selfParent.curGameData.opertion.split(","),e=(parseInt(t[0]),parseInt(t[1])+1),i=[],n=1;e>n;n++)i.push(n);return i=this.getRandomAry(i)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}},e}(CllickTouchScene);__reflect(GameType2Control.prototype,"GameType2Control");var GameType3Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.rightData=new Object;for(var t=0;20>t;t++)this.selfParent["r_"+t].visible=!1,6>t&&this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),this.quPos.push(new egret.Point(this.selfParent["fru_"+t].x,this.selfParent["fru_"+t].y));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},e.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},e.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.idTimeout=[],this.rightData=null,this.selfParent.testurl0.text=""},e.prototype.creatImg=function(){var t=parseInt(this.selfParent.curGameData.condition_id),e=this.selfParent.curGameData.answer,i=this.curGameData.quetion.split(",");i=i.sort();for(var n=this.creatRandomAry(),s="",r=0,o=0;o<i.length;o++){var a=parseInt(i[o]);r+=a}var h=0,l=0,c=[],u=[];if(t>30&&35>t&&32!=t)for(var o=0;o<n.length;o++){s=n[o];var p=CommonDragonBones.getInstance().getElementImg(s);p.rotation=App.RandomUtils.limitInteger(0,180),p.pixelHitTest=!0;var g=p.name;"img_sortmore16"==this.rightData[g]?h++:l++,this.quNumAry.push(p)}else if(32==t)for(var o=0;o<n.length;o++){s=n[o];var p=CommonDragonBones.getInstance().getElementImg(s);p.rotation=App.RandomUtils.limitInteger(0,180),p.pixelHitTest=!0;var m=p.name;"left"==this.rightData[m]?(h++,c.push(p)):(l++,u.push(p)),this.quNumAry.push(p)}else for(var o=0;o<i.length;o++){var a=parseInt(i[o]);s=n[o];for(var d=0;a>d;d++){var p=CommonDragonBones.getInstance().getElementImg(s);p.rotation=App.RandomUtils.limitInteger(0,180),p.pixelHitTest=!0;var f=p.name;"img_sortmore16"==this.rightData[f]?h++:l++,this.quNumAry.push(p)}35!=t&&36!=t&&o==i.length-1&&(this.rightName=s)}if((35==t||36==t||31==t||33==t||34==t)&&(l>h?this.rightName="img_sortmore13":this.rightName="img_sortmore16"),32==t){var v=[],y=void 0,_=void 0;if(y=[1,2,3,4,5,6,7,8,9,10],_=[11,12,13,14,15,16,17,18],h>l){var C=App.RandomUtils.limitInteger(0,c.length-1);v.push(c[C].name),this.rightName=c[C].name;var x=5,P=u.length-1;for(egret.log(u);x>0;){var A=App.RandomUtils.limitInteger(0,P),w=e+_[A];v.push(w),_.splice(A,1),x--}}else{var C=App.RandomUtils.limitInteger(0,u.length-1);v.push(u[C].name),this.rightName=u[C].name;for(var x=5,P=c.length-1;x>0;){var b=App.RandomUtils.limitInteger(0,P),w=e+y[b];v.push(w),y.splice(b,1),x--}}n=[],n=v}else if(31==t||33==t||34==t||35==t||36==t){var E=this.selfParent.curGameData.opertion.split("_"),I=parseInt(E[0]),T=parseInt(E[1])+1;n=[];for(var o=I;T>o;o++){var w=e+o;n.push(w)}}else for(var x=6-n.length;x>0;){var C=App.RandomUtils.limitInteger(0,this.elemNameAry.length-1);n.push(this.elemNameAry[C]),this.elemNameAry.splice(C,1),x--}for(var D=[];r>0;){var C=App.RandomUtils.limitInteger(0,this.quPos.length-1);D.push(this.quPos[C]);var O=r-1,M=this.quPos[C];this.quNumAry[O].x=M.x,this.quNumAry[O].y=M.y,this.quPos.splice(C,1),r--}n=this.getRandomAry(n);for(var S=0,N=n;S<N.length;S++){var R=N[S],o=n.indexOf(R),M=this.opPos[o];s=R;var p=CommonDragonBones.getInstance().getElementImg(s);p.x=M.x,p.y=M.y,p.scaleX=p.scaleY=.5,p.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),this.opNumAry.push(p)}(35==t||36==t)&&this.moveElmentAuto(),this.showQuestionsView()},e.prototype.creatRandomAry=function(){var t=parseInt(this.selfParent.curGameData.condition_id),e=this.selfParent.curGameData.quetion.split(","),i=e.length,n=this.selfParent.curGameData.opertion.split("_"),s=this.selfParent.curGameData.answer,r=0;r=31==t||33==t||34==t||35==t||36==t?parseInt(n[0]):parseInt(n[1])+1,this.elemNameAry=[];for(var o=1;r>o;o++){var a=s+o;this.elemNameAry.push(a)}var h=[];if(32==t){e=this.getRandomAry(e);var l=void 0,c=void 0;l=[1,2,3,4,5,6,7,8,9,10],c=[11,12,13,14,15,16,17,18];var u=parseInt(e[0]),p=parseInt(e[1]),g=this.countNumAry(l,u,s),m=this.countNumAry(c,p,s);h=this.getRandomAry(g.concat(m));for(var d=[],f=0,v=h;f<v.length;f++){var y=v[f],_=s+y;d.push(_)}h=d;for(var C=0,x=0,P=0,A=h;P<A.length;P++){var y=A[P],w=y.split(s),b=parseInt(w[1]),E=s+b;11>b?(this.rightData[E]="left",C++):(this.rightData[E]="right",x++)}}else{if(31==t||33==t||34==t){e=this.getRandomAry(e);var l=void 0,c=void 0;l=[1,2,3,4,5],c=[6,7,8,9,10];var I=parseInt(e[0]),T=parseInt(e[1]),D=this.countNumAry(l,I,s),O=this.countNumAry(c,T,s);h=this.getRandomAry(D.concat(O));for(var d=[],M=0,S=h;M<S.length;M++){var y=S[M],N=s+y;d.push(N)}h=d}else for(;i>0;){var R=App.RandomUtils.limitInteger(0,this.elemNameAry.length-1);h.push(this.elemNameAry[R]),this.elemNameAry.splice(R,1),i--}for(var L=0,G=h;L<G.length;L++){var y=G[L],w=y.split(s),b=parseInt(w[1]),E=s+b;6>b?this.rightData[E]="img_sortmore16":this.rightData[E]="img_sortmore13"}}return h},e.prototype.countNumAry=function(t,e,i){var n=[],s=t;if(e>=t.length){for(var r=e-t.length;r;){var o=App.RandomUtils.limitInteger(0,t.length-1);n.push(t[o]),r--}s=s.concat(n)}else{for(;e;){var o=App.RandomUtils.limitInteger(0,t.length-1);n.push(s[o]),s.splice(o,1),e--}s=n}return s},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.moveElmentAuto=function(){this.idTimeout=[];for(var t=this,e=function(e){var n=(i.quNumAry.indexOf(e),200*Math.random()),s=setTimeout(function(){var i=new RandomMove;i.play(e),t.idTimeout.push(s)},n)},i=this,n=0,s=this.quNumAry;n<s.length;n++){var r=s[n];e(r)}},e.prototype.clearAll=function(){if(this.idTimeout)for(var t=0,e=this.idTimeout;t<e.length;t++){var i=e[t];i&&egret.clearTimeout(i)}for(var n=0,s=this.quNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}for(var r=0,o=this.opNumAry;r<o.length;r++){var i=o[r];i&&i.parent&&i.parent.removeChild(i)}},e.prototype.onClickTouch=function(t){if(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);e>=0&&(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.selectImg=t.currentTarget,this.setColor())}},e.prototype.setColor=function(){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&(i.scaleX=i.scaleY=.5)}this.selectImg.scaleX=this.selectImg.scaleY=.8},e}(UIObject);__reflect(GameType3Control.prototype,"GameType3Control");var GameType4Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.rightData=new Object;for(var t=0;6>t;t++)this.selfParent["r_"+t].visible=!1,6>t&&this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),0==t&&this.quPos.push(new egret.Point(495,299));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},e.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},e.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},e.prototype.creatImg=function(){var t=(parseInt(this.selfParent.curGameData.condition_id),this.curGameData.quetion.split(",")),e=this.creatRandomAry();this.rightName=this.curGameData.answer;for(var i=0,n=t;i<n.length;i++){var s=n[i],r=t.indexOf(s),o=CommonDragonBones.getInstance().getElementImg(s);o.x=this.quPos[r].x,o.y=this.quPos[r].y,this.quNumAry.push(o)}for(var a=0,h=e;a<h.length;a++){var s=h[a],r=e.indexOf(s),o=CommonDragonBones.getInstance().getElementImg(s);o.x=this.opPos[r].x,o.y=this.opPos[r].y,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),this.opNumAry.push(o)}this.showQuestionsView()},e.prototype.creatRandomAry=function(){for(var t=this.curGameData.opertion.split(","),e=this.curGameData.answer.split(","),i=t[0],n=parseInt(t[1]),s=parseInt(t[2])+1,r=[],o=[],a=0,h=e;a<h.length;a++){var l=h[a];l&&o.push(l)}for(var c=n;s>c;c++){var u=i+c;r.push(u)}for(var p=0,g=o;p<g.length;p++)for(var l=g[p],m=0,d=r;m<d.length;m++){var f=d[m],c=r.indexOf(f);l==f&&r.splice(c,1)}for(var v=6-e.length;v;){var y=App.RandomUtils.limitInteger(0,r.length-1);o.push(r[y]),r.splice(y,1),v--}return o=this.getRandomAry(o)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}},e.prototype.onClickTouch=function(t){if(Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);e>=0&&(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.selectImg=t.currentTarget,this.setColor())}},e.prototype.setColor=function(){if(null==this.selectImg.filters){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&(i.filters=null,i.scaleX=i.scaleY=1)}this.selectImg.scaleX=this.selectImg.scaleY=1.4}},e}(UIObject);__reflect(GameType4Control.prototype,"GameType4Control");var GameType5Control=function(t){function e(e){var i=t.call(this)||this;return i.curScal=1,t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.wenhaoAry=[],this.rightData=new Object;for(var t=0;6>t;t++)this.selfParent["r_"+t].visible=!1,this.selfParent["sh_"+t].visible=!1,6>t&&(this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),this.quPos.push(new egret.Point(this.selfParent["sh_"+t].x,this.selfParent["sh_"+t].y)));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},e.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},e.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},e.prototype.creatImg=function(){var t=parseInt(this.selfParent.curGameData.condition_id),e=this.curGameData.quetion.split(","),i=this.creatRandomAry(),n=this.curGameData.answer.split(",");this.rightName=n[0]+n[1];var s=n[0];if(53==t){this.quPos=[];for(var r=6;11>r;r++)this.quPos.push(new egret.Point(this.selfParent["sh_"+r].x,this.selfParent["sh_"+r].y))}for(var o=0;o<e.length;o++){var a=e[o];if("?"==a){var h=CommonDragonBones.getInstance().getDrgoneDisplay("wen");h.animation.play(1),h.name="wen",h.x=this.quPos[o].x,h.y=this.quPos[o].y,this.quNumAry.push(h)}else{a=s+a;var l=CommonDragonBones.getInstance().getElementImg(a);l.x=this.quPos[o].x,l.y=this.quPos[o].y,this.quNumAry.push(l)}}for(var c=0,u=i;c<u.length;c++){var a=u[c],r=i.indexOf(a);a=s+a;var l=CommonDragonBones.getInstance().getElementImg(a);l.x=this.opPos[r].x,l.y=this.opPos[r].y,58!=t&&(l.pixelHitTest=!0),this.setScale(t,l),l.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),this.opNumAry.push(l)}this.showQuestionsView()},e.prototype.setScale=function(t,e){var i=0;switch(t){case 49:i=.4;break;case 50:i=.9;break;case 51:i=.6;break;case 52:i=.4;break;case 53:i=.6;break;case 54:i=.6;break;case 55:i=.8;break;case 56:i=.6;break;case 57:i=.5;break;case 58:i=1;break;case 59:i=.7;break;case 60:i=.6}this.curScal=i,e.scaleX=e.scaleY=i},e.prototype.creatRandomAry=function(){for(var t=this.curGameData.opertion.split(","),e=t.length,i=[];e;){var n=App.RandomUtils.limitInteger(0,t.length-1);i.push(t[n]),t.splice(n,1),e--}return i=this.getRandomAry(i)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}},e.prototype.onClickTouch=function(t){if(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);e>=0&&(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.selectImg=t.currentTarget,this.setColor())}},e.prototype.setColor=function(){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&(i.scaleX=i.scaleY=this.curScal)}var n=this.curScal+.4;this.selectImg.scaleX=this.selectImg.scaleY=n},e}(UIObject);__reflect(GameType5Control.prototype,"GameType5Control");var GameType6Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.rightData=new Object;for(var t=0;6>t;t++)this.selfParent["r_"+t].visible=!1,6>t&&this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),0==t&&this.quPos.push(new egret.Point(512,300));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},e.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},e.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},e.prototype.creatImg=function(){var t=parseInt(this.selfParent.curGameData.condition_id),e=this.curGameData.quetion.split(","),i=this.creatRandomAry();this.rightName=this.curGameData.answer;for(var n=0,s=e;n<s.length;n++){var r=s[n],o=e.indexOf(r),a=CommonDragonBones.getInstance().getElementImg(r);(65==t||66==t)&&(a.rotation=App.RandomUtils.limitInteger(20,180),a.scaleX=a.scaleY=.8),a.x=this.quPos[o].x,a.y=this.quPos[o].y,this.quNumAry.push(a)}for(var h=0,l=i;h<l.length;h++){var r=l[h],o=i.indexOf(r),a=CommonDragonBones.getInstance().getElementImg(r);a.x=this.opPos[o].x,t>66&&71>t?(a.y=this.opPos[o].y-25,a.scaleX=a.scaleY=.6):a.y=this.opPos[o].y,(71==t||72==t)&&(a.scaleX=a.scaleY=.6),(63==t||64==t||65==t||66==t)&&(a.pixelHitTest=!0),a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),this.opNumAry.push(a)}this.showQuestionsView()},e.prototype.creatRandomAry=function(){for(var t=this.curGameData.opertion.split(","),e=this.curGameData.answer.split(","),i=t[0],n=parseInt(t[1]),s=parseInt(t[2])+1,r=[],o=[],a=0,h=e;a<h.length;a++){var l=h[a];l&&o.push(l)}for(var c=n;s>c;c++){var u=i+c;r.push(u)}for(var p=0,g=o;p<g.length;p++)for(var l=g[p],m=0,d=r;m<d.length;m++){var f=d[m],c=r.indexOf(f);l==f&&r.splice(c,1)}for(var v=6-e.length;v;){var y=App.RandomUtils.limitInteger(0,r.length-1);o.push(r[y]),r.splice(y,1),v--}return o=this.getRandomAry(o)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}},e.prototype.onClickTouch=function(t){if(Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);
e>=0&&(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.selectImg=t.currentTarget,this.setColor())}},e.prototype.setColor=function(){for(var t=parseInt(this.selfParent.curGameData.condition_id),e=0,i=this.opNumAry;e<i.length;e++){var n=i[e];n&&(t>66&&73>t?n.scaleX=n.scaleY=.6:n.scaleX=n.scaleY=1)}t>66&&73>t?this.selectImg.scaleX=this.selectImg.scaleY=.9:this.selectImg.scaleX=this.selectImg.scaleY=1.4},e}(UIObject);__reflect(GameType6Control.prototype,"GameType6Control");var GameType7Control=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){var t=this.selfParent.curGameData.condition_id;switch(t){case"73":this.curControl=new SpecialControl73(this.selfParent);break;case"74":case"75":this.curControl=new SpecialControl74(this.selfParent);break;case"76":case"77":this.curControl=new SpecialControl76(this.selfParent);break;case"80":case"81":case"82":case"83":case"84":this.curControl=new SpecialControl80(this.selfParent);break;default:this.curControl=new SpecialControl78(this.selfParent)}},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.quNumAry;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.opNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.wenhaoAry;a<h.length;a++){var s=h[a];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){this.curControl.setGameOverData()},e.prototype.onDestroy=function(){this.curControl.onDestroy()},e.prototype.creatImg=function(){var t=this.curGameData.answer.split(",");t[0],this.curGameData.quetion.split(","),this.creatRandomAry();this.showQuestionsView()},e.prototype.creatRandomAry=function(){for(var t=this.selfParent.curGameData.opertion.split(","),e=(parseInt(t[0]),parseInt(t[1])+1),i=[],n=1;e>n;n++)i.push(n);return i=this.getRandomAry(i)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}},e}(CllickTouchScene);__reflect(GameType7Control.prototype,"GameType7Control");var GameType8Control=function(_super){function GameType8Control(t){var e=_super.call(this)||this;return e.selfParent=t,e.init(),e}return __extends(GameType8Control,_super),GameType8Control.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.wenhaoAry=[],this.rightNameAry=[],this.selectedAry=[],this.curPosNum=[3,5,9,16,25],this.posDataObj=new Object,this.rightData=new Object,this.curGameData=this.selfParent.curGameData,this.selfParent.op_bg.visible=!1,this.initPos(),this.creatImg()},GameType8Control.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.opNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.quNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},GameType8Control.prototype.setGameOverData=function(){var t=!0;if(this.selectedAry.length==this.rightNameAry.length)for(var e=0,i=this.selectedAry;e<i.length;e++){var n=i[e],s=this.selectedAry.indexOf(n);if(n&&this.rightNameAry[s]){if(n!=this.selectedAry[s]){t=!1;break}t=!0}}else t=!1;t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var r=new GlobalEvent(GlobalEvent.evt);r.b=t,this.selfParent.dispatchEvent(r)},GameType8Control.prototype.showGameOverData=function(){var t=!0;if(this.selectedAry.length==this.rightNameAry.length)for(var e=0,i=this.selectedAry;e<i.length;e++){var n=i[e],s=this.selectedAry.indexOf(n);if(n&&this.rightNameAry[s]){if(n!=this.selectedAry[s]){t=!1;break}t=!0}}else t=!1;t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},GameType8Control.prototype.onDestroy=function(){_super.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},GameType8Control.prototype.initPos=function(){for(var t=0;t<this.curPosNum.length;t++){for(var e="txt"+this.curPosNum[t]+"_",i=this.curPosNum[t],n=[],s=0;i>s;s++){var r=new egret.Point(this.selfParent[e+s].x,this.selfParent[e+s].y);n.push(r)}var o=t+1;this.posDataObj[o]=n}},GameType8Control.prototype.creatImg=function(){var t=parseInt(this.curGameData.condition_id),e=this.curGameData.opertion,i=this.curGameData.quetion.split(","),n=parseInt(this.curGameData.answer),s=CommonDragonBones.getInstance().getElementImg(e);s.x=512,s.y=329,this.opNumAry.push(s);var r,o,a,h,l=e.split("img_sufg")[1],c=this.posDataObj[l],u=[];if(94>t){a=parseInt(i[0]),h=parseInt(i[1]),h>a?(r=parseInt(i[0]),o=parseInt(i[1])+1):(r=parseInt(i[1]),o=parseInt(i[0])+1);for(var p=r;o>p;p++)u.push(p)}else u=i;for(var g=n,m=[];g;){var d=App.RandomUtils.limitInteger(0,u.length-1);m.push(u[d]),u.splice(d,1),g--}94>t?this.rightNameAry=this.sortNum(m,a,h):this.rightNameAry=this.sortNum(m,1,2);var f,v;switch(n){case 3:f=100,v=100;break;case 5:f=100,v=100;break;case 9:f=214,v=100;break;case 16:f=162,v=82;break;case 25:f=130,v=69}m=this.creatRandomAry(m);for(var y=0,_=m;y<_.length;y++){var C=_[y],x=m.indexOf(C),P=m[x]+"",A=new eui.Group,w=c[x];if(16==n&&C==this.curStartNum){var b=CommonDragonBones.getInstance().getElementImg("img_31");b.x=w.x,b.y=w.y,b.pixelHitTest=!0,this.selfParent.addChild(b)}if(25==n&&C==this.curStartNum){var b=CommonDragonBones.getInstance().getElementImg("img_32");b.x=w.x,b.y=w.y,b.pixelHitTest=!0,this.selfParent.addChild(b)}var E=new egret.TextField;E.text=P,E.size=40,E.textAlign=egret.HorizontalAlign.CENTER,E.verticalAlign=egret.VerticalAlign.MIDDLE,E.strokeColor=16776960,E.fontFamily="ziti",A.width=E.width=f,A.height=E.height=v,A.addChild(E),this.selfParent.addChild(A),A.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),A.x=w.x,A.y=w.y,A.name=P,A.anchorOffsetX=f/2,A.anchorOffsetY=v/2,this.quNumAry.push(A)}this.showQuestionsView()},GameType8Control.prototype.sortNum=function(arr,n1,n2){for(var max,num1,num2,_ary=JSON.parse(JSON.stringify(arr)),i=0;i<_ary.length;i++)for(var j=i;j<_ary.length;j++)num1=eval(_ary[i]),num2=eval(_ary[j]),n2>n1?num1>num2&&(max=_ary[j],_ary[j]=_ary[i],_ary[i]=max):num2>num1&&(max=_ary[j],_ary[j]=_ary[i],_ary[i]=max);return n2>n1?this.curStartNum=_ary[0]:this.curStartNum=_ary[_ary.length-1],_ary},GameType8Control.prototype.creatRandomAry=function(t){for(var e=t.length,i=[];e;){var n=App.RandomUtils.limitInteger(0,t.length-1);i.push(t[n]),t.splice(n,1),e--}return i},GameType8Control.prototype.clearAll=function(){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.quNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}var r=this.selfParent.getChildByName("img_31");r&&this.selfParent.removeChild(r);var o=this.selfParent.getChildByName("img_32");o&&this.selfParent.removeChild(o)},GameType8Control.prototype.onClickTouch=function(t){if(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),Game_Page1Scene.isGameBegin){var e=this.quNumAry.indexOf(t.currentTarget);if(e>=0){var i=t.currentTarget;i.name&&this.selectedAry.push(i.name)}}},GameType8Control}(UIObject);__reflect(GameType8Control.prototype,"GameType8Control");var RandomMove=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.play=function(t){var e=932,i=420,n=72.5,s=159,r=(2*Math.PI*Math.random(),5),o=5;this.id=egret.setInterval(function(){t.x=t.x+r,t.y=t.y+o;var a=t.x,h=t.y;egret.log("当前y坐标   "+h),egret.log("速度   "+o),a>=e&&(r=-App.RandomUtils.limitInteger(5,7)),n>=a&&(r=App.RandomUtils.limitInteger(5,7)),h>=i&&(o=-App.RandomUtils.limitInteger(5,7)),s>=h&&(o=App.RandomUtils.limitInteger(5,7))},this,10)},e.prototype.clear=function(){egret.clearInterval(this.id)},e}(UIObject);__reflect(RandomMove.prototype,"RandomMove");var SpecialControl73=function(_super){function SpecialControl73(t){var e=_super.call(this)||this;return _super.prototype.onAdd.call(e),e.selfParent=t,e.init(),e}return __extends(SpecialControl73,_super),SpecialControl73.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.wenhaoAry=[],this.rightData=new Object;for(var t=0;6>t;t++)this.selfParent["r_"+t].visible=!1,this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),3>t&&(this.selfParent["r_73_"+t].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_73_"+t].x,this.selfParent["r_73_"+t].y)));this.curGameData=this.selfParent.curGameData,this.creatImg()},SpecialControl73.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},SpecialControl73.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},SpecialControl73.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},SpecialControl73.prototype.onDestroy=function(){_super.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},SpecialControl73.prototype.creatImg=function(){for(var t=(parseInt(this.selfParent.curGameData.condition_id),this.curGameData.quetion.split(",")),e=this.curGameData.opertion.split(","),i=e[0],n=parseInt(e[1]),s=parseInt(e[2]),r=parseInt(t[0]),o=[],a=n;s>a;a++)o.push(a);for(var h=[];r>0;){var l=App.RandomUtils.limitInteger(1,o.length-1);h.push(o[l]),o.splice(l,1),r--}h=this.sortNum(h,1,2),this.rightName=i+h[h.length-1]+"",h=this.getRandomAry(h);for(var c=0,u=h;c<u.length;c++){var p=u[c],a=h.indexOf(p),g=this.quPos[a],m=i+p,d=CommonDragonBones.getInstance().getElementImg(m,1);d.x=g.x,d.y=g.y,this.quNumAry.push(d)}for(var f=6-h.length;f>0;){var l=App.RandomUtils.limitInteger(1,o.length-1);h.push(o[l]),o.splice(l,1),f--}h=this.getRandomAry(h);for(var v=0,y=h;v<y.length;v++){var p=y[v],a=h.indexOf(p),g=this.opPos[a],m=i+p,d=CommonDragonBones.getInstance().getElementImg(m,1);d.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),d.x=g.x,d.y=g.y+33,d.scaleX=d.scaleY=.6,this.opNumAry.push(d)}this.showQuestionsView()},SpecialControl73.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},SpecialControl73.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},SpecialControl73.prototype.sortNum=function(arr,n1,n2){for(var max,num1,num2,_ary=JSON.parse(JSON.stringify(arr)),i=0;i<_ary.length;i++)for(var j=i;j<_ary.length;j++)num1=eval(_ary[i]),num2=eval(_ary[j]),n2>n1?num1>num2&&(max=_ary[j],_ary[j]=_ary[i],_ary[i]=max):num2>num1&&(max=_ary[j],_ary[j]=_ary[i],_ary[i]=max);return _ary},SpecialControl73.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}},SpecialControl73.prototype.onClickTouch=function(t){if(Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);e>=0&&(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),this.selectImg=t.currentTarget,this.setColor())}},SpecialControl73.prototype.setColor=function(){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&(i.scaleX=i.scaleY=.6)}this.selectImg.scaleX=this.selectImg.scaleY=.8},SpecialControl73}(UIObject);__reflect(SpecialControl73.prototype,"SpecialControl73");var SpecialControl74=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.elemNameAry=[],this.rightData=new Object;for(var t=0;6>t;t++)this.selfParent["r_"+t].visible=!1,6>t&&this.opPos.push(new egret.Point(this.selfParent["r_"+t].x,this.selfParent["r_"+t].y)),0==t&&this.quPos.push(new egret.Point(495,299));this.curGameData=this.selfParent.curGameData,this.creatImg()},e.prototype.showQuestionsView=function(){for(var t=this.selfParent.r_0.parent,e=0,i=this.quNumAry;e<i.length;e++){var n=i[e];t.addChild(n)}for(var s=0,r=this.opNumAry;s<r.length;s++){var n=r[s];t.addChild(n)}},e.prototype.setGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1));var e=new GlobalEvent(GlobalEvent.evt);e.b=t,this.selfParent.dispatchEvent(e)},e.prototype.showGameOverData=function(){var t=!1;this.selectImg&&(this.selectImg.name==this.rightName?(this.selectImg=null,this.selfParent.testurl0.text="正确",t=!0):(this.selfParent.testurl0.text="错误",t=!1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.rightData=null,Game_Page1Scene.isGameBegin=!1},e.prototype.creatImg=function(){var t=(parseInt(this.selfParent.curGameData.condition_id),this.curGameData.quetion.split(",")),e=this.creatRandomAry();this.rightName=this.curGameData.answer;for(var i=0,n=t;i<n.length;i++){var s=n[i],r=t.indexOf(s),o=CommonDragonBones.getInstance().getElementImg(s);o.x=this.quPos[r].x,o.y=this.quPos[r].y,this.quNumAry.push(o)}for(var a=0,h=e;a<h.length;a++){var s=h[a],r=e.indexOf(s),o=CommonDragonBones.getInstance().getElementImg(s,1);o.x=this.opPos[r].x,o.y=this.opPos[r].y+33,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickTouch,this),o.scaleX=o.scaleY=.5,this.opNumAry.push(o)}this.showQuestionsView()},e.prototype.creatRandomAry=function(){for(var t=this.curGameData.opertion.split(","),e=this.curGameData.answer.split(","),i=t[0],n=parseInt(t[1]),s=parseInt(t[2])+1,r=[],o=[],a=0,h=e;a<h.length;a++){var l=h[a];l&&o.push(l)}for(var c=n;s>c;c++){var u=i+c;r.push(u)}for(var p=0,g=o;p<g.length;p++)for(var l=g[p],m=0,d=r;m<d.length;m++){var f=d[m],c=r.indexOf(f);l==f&&r.splice(c,1)}for(var v=6-e.length;v;){var y=App.RandomUtils.limitInteger(0,r.length-1);o.push(r[y]),r.splice(y,1),v--}return o=this.getRandomAry(o)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}},e.prototype.onClickTouch=function(t){if(CommonSoundManage.getInstance().playSoundEffect("click_mp3"),Game_Page1Scene.isGameBegin){var e=this.opNumAry.indexOf(t.currentTarget);e>=0&&(this.selectImg=t.currentTarget,this.setColor())}},e.prototype.setColor=function(){for(var t=0,e=this.opNumAry;t<e.length;t++){var i=e[t];i&&(i.scaleX=i.scaleY=.5)}this.selectImg.scaleX=this.selectImg.scaleY=.8},e}(UIObject);__reflect(SpecialControl74.prototype,"SpecialControl74");var SpecialControl76=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.curAnswerData=new Object,this.wenhaoObj=new Object,this.rigtData=new Object,this.hitCurRectIndexObj=new Object,this.curGameData=this.selfParent.curGameData;for(var t=this.curGameData.quetion.split(","),e=t.length,i=0;9>i;i++)6>i&&(this.opPos.push(new egret.Point(this.selfParent["r_"+i].x,this.selfParent["r_"+i].y)),this.selfParent["r_"+i].visible=!1),4==e?4>i&&(this.selfParent["r_76_"+i].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_76_"+i].x,this.selfParent["r_76_"+i].y))):5==e&&i>3&&(this.selfParent["r_76_"+i].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_76_"+i].x,this.selfParent["r_76_"+i].y)));this.creatImg()},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.quNumAry;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.opNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.wenhaoAry;a<h.length;a++){var s=h[a];e.addChild(s)}for(var l=0,c=this.rectList;l<c.length;l++){var s=c[l];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}t=!0}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var s=new GlobalEvent(GlobalEvent.evt);s.b=t,this.selfParent.dispatchEvent(s)},e.prototype.showGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}t=!0}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.rigtData=null,this.wenhaoObj=null,this.hitCurRectIndexObj=null},e.prototype.creatImg=function(){for(var t,e,i,n,s=this.curGameData.answer.split(","),r=s[0],o=this.curGameData.quetion.split(","),a=this.creatRandomAry(),h=[],l=1,c=parseInt(this.curGameData.condition_id),u=0;u<o.length;u++){"?"==o[u]?(t=parseInt(s[l]),l++):t=parseInt(o[u]),e=r+t;var p=this.quPos[u];if("?"==o[u]){var g=CommonDragonBones.getInstance().getDrgoneDisplay("wen");g.animation.play(1),g.x=this.quPos[u].x,g.y=this.quPos[u].y,this.wenhaoAry.push(g),this.wenhaoObj[""+u]=g,n=new eui.Rect,n.fillAlpha=0,n.name=e,n.width=186,n.height=167,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=p.x,n.y=p.y,h.push(n),this.rigtData[""+u]=n;var m=e+(h.length-1);this.hitCurRectIndexObj[m]=""+u}else i=CommonDragonBones.getInstance().getElementImg(e),i.x=p.x,i.y=p.y,this.quNumAry.push(i)}a=this.getAppointNumAry(a);for(var d=0,f=a;d<f.length;d++){var v=f[d],y=a.indexOf(v),_=r+v,C=CommonDragonBones.getInstance().getElementImg(_);C.x=this.opPos[y].x,76==c&&(C.y=this.opPos[y].y-15,C.scaleX=C.scaleY=.6),77==c&&(C.y=this.opPos[y].y-30,C.scaleX=C.scaleY=.5),this.opNumAry.push(C)}this.imgList=this.opNumAry,this.rectList=h,this.showQuestionsView()},e.prototype.getAppointNumAry=function(t){for(var e=t,i=[],n=this.curGameData.answer.split(","),s=1;s<n.length;s++)i.push(n[s]);for(var r=this.selfParent.curGameData.opertion.split(","),o=(parseInt(r[1]),6-i.length),a=e.length;a>0;){for(var h=0,l=i;h<l.length;h++){var c=l[h],u=a-1;c==e[u]&&e.splice(u,1)}a--}for(egret.log(e.length);o>0;){var p=App.RandomUtils.limitInteger(0,o-1);i.push(e[p]),e.splice(p,1),o--}for(var g=i.length,m=[];g>0;){var p=App.RandomUtils.limitInteger(0,i.length-1);m.push(i[p]),i.splice(p,1),g--}return egret.log(m.length),m},e.prototype.creatRandomAry=function(){for(var t=this.selfParent.curGameData.opertion.split(","),e=(parseInt(t[0]),parseInt(t[1])+1),i=[],n=1;e>n;n++)i.push(n);return i=this.getRandomAry(i)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}},e}(CllickTouchScene);__reflect(SpecialControl76.prototype,"SpecialControl76");var SpecialControl78=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.curAnswerData=new Object,this.wenhaoObj=new Object,this.rigtData=new Object,this.hitCurRectIndexObj=new Object,this.curGameData=this.selfParent.curGameData;for(var t=this.curGameData.quetion.split(","),e=t.length,i=0;9>i;i++)4==e?4>i&&(this.selfParent["r_76_"+i].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_76_"+i].x,this.selfParent["r_76_"+i].y)),this.opPos.push(new egret.Point(this.selfParent["r_78_"+i].x,this.selfParent["r_78_"+i].y))):5==e&&i>3&&(this.selfParent["r_76_"+i].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_76_"+i].x,this.selfParent["r_76_"+i].y))),7==e&&(7>i&&(this.quPos.push(new egret.Point(this.selfParent["r_sidai_"+i].x,this.selfParent["r_sidai_"+i].y)),this.selfParent["r_sidai_"+i].visible=!1),6>i&&(this.opPos.push(new egret.Point(this.selfParent["r_"+i].x,this.selfParent["r_"+i].y)),this.selfParent["r_"+i].visible=!1));this.creatImg()},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.rectList;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.quNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.opNumAry;a<h.length;a++){var s=h[a];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){var t=!0,e=(this.rectList.length,this.curGameData.opertion.split(",")),i=this.curGameData.answer,n=e[0];for(var s in this.rigtData){var r=this.rigtData[s].split(i)[1],o=void 0;if(!this.curAnswerData[s]){t=!1;break}if(!this.curAnswerData[s].name){t=!1;break}if(o=this.curAnswerData[s].name.split(n)[1],r!=o){t=!1;break}t=!0}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var a=new GlobalEvent(GlobalEvent.evt);a.b=t,this.selfParent.dispatchEvent(a)},e.prototype.showGameOverData=function(){var t=!0,e=(this.rectList.length,this.curGameData.opertion.split(",")),i=this.curGameData.answer,n=e[0];for(var s in this.rigtData){var r=this.rigtData[s].split(i)[1],o=void 0;if(!this.curAnswerData[s]){t=!1;break}if(!this.curAnswerData[s].name){t=!1;break}if(o=this.curAnswerData[s].name.split(n)[1],r!=o){t=!1;break}t=!0}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.rigtData=null,this.wenhaoObj=null,this.hitCurRectIndexObj=null},e.prototype.creatImg=function(){for(var t=(this.curGameData.answer.split(","),this.curGameData.answer),e=this.curGameData.quetion.split(","),i=this.curGameData.opertion.split(","),n=i[0],s=this.creatRandomAry(),r=[],o=(parseInt(this.curGameData.condition_id),0),a=0,h=0;h<s.length;h++){var l=t+s[h],c=this.quPos[h],u=CommonDragonBones.getInstance().getElementImg(l);u.x=c.x,u.y=c.y,this.quNumAry.push(u);var p="img_quan_bg",g=CommonDragonBones.getInstance().getElementImg(p);if(g.x=u.x,7==s.length?g.y=u.y+192:g.y=u.y+142,g.name=l,this.wenhaoAry.push(g),"1"==s[h]&&7==s.length)o=g.x,a=g.y;else{r.push(g);var m=l+(r.length-1);this.rigtData[""+(r.length-1)]=l,this.hitCurRectIndexObj[m]=""+h}if(7==e.length){var d=n+(h+1),f=CommonDragonBones.getInstance().getElementImg(d);this.opNumAry.push(f)}else{var d=n+(h+1),f=CommonDragonBones.getInstance().getElementImg(d);f.x=this.opPos[h].x,f.y=this.opPos[h].y,this.opNumAry.push(f)}}var v=[];if(7==e.length){for(var y=0,_=this.opNumAry;y<_.length;y++){var C=_[y],x=this.opNumAry.indexOf(C),P=C.name.split(n)[1];"1"!=P?v.push(C):(C.x=o,C.y=a)}for(var A=0,w=v;A<w.length;A++){var C=w[A],x=v.indexOf(C);C.x=this.opPos[x].x,C.y=this.opPos[x].y}this.imgList=v}else this.imgList=this.opNumAry;this.rectList=r,this.showQuestionsView()},e.prototype.copyNewobj=function(t){var e=new eui.Rect;return e.fillAlpha=0,e.name=t.name,e.width=t.width,e.height=t.height,e.anchorOffsetX=t.width/2,e.anchorOffsetY=t.height/2,e.x=t.x,e.y=t.y,e},e.prototype.creatRandomAry=function(){for(var t=this.selfParent.curGameData.quetion.split(","),e=[],i=1;i<t.length+1;i++)e.push(i);return e=this.getRandomAry(e)},e.prototype.getRandomAry=function(t){for(var e=this.getRandomNumAry(t.length),i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(t[r])}return i},e.prototype.getRandomNumAry=function(t){for(var e=[],i=0;t>i;i++)e.push(i);for(var n=[];t>0;){var s=App.RandomUtils.limitInteger(0,e.length-1);n.push(e[s]),e.splice(s,1),t--}return n},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}for(var n=0,s=this.opNumAry;n<s.length;n++){var i=s[n];i&&i.parent&&i.parent.removeChild(i)}for(var r=0,o=this.rectList;r<o.length;r++){var i=o[r];i&&i.parent&&i.parent.removeChild(i)}},e}(CllickTouchScene);__reflect(SpecialControl78.prototype,"SpecialControl78");var SpecialControl80=function(t){function e(e){var i=t.call(this)||this;return t.prototype.onAdd.call(i),i.selfParent=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.quanPos=[],this.wenhaoAry=[],this.curAnswerData=new Object,this.wenhaoObj=new Object,this.rigtData=new Object,this.hitCurRectIndexObj=new Object,this.curGameData=this.selfParent.curGameData;for(var t=this.curGameData.condition_id,e=0;6>e;e++)this.opPos.push(new egret.Point(this.selfParent["r_"+e].x,this.selfParent["r_"+e].y)),this.selfParent["r_"+e].visible=!1,80==t&&(1>e&&(this.selfParent["r_sort80_"+e].visible=!1,this.quPos.push(new egret.Point(this.selfParent["r_sort80_"+e].x,this.selfParent["r_sort80_"+e].y))),this.quanPos.push(new egret.Point(this.selfParent["r_hit80_"+e].x,this.selfParent["r_hit80_"+e].y))),81==t&&(1>e&&this.quPos.push(new egret.Point(512,300)),this.quanPos.push(new egret.Point(this.selfParent["r_hit81_"+e].x,this.selfParent["r_hit81_"+e].y))),82==t&&(1>e&&this.quPos.push(new egret.Point(512,300)),this.quanPos.push(new egret.Point(this.selfParent["r_hit82_"+e].x,this.selfParent["r_hit82_"+e].y))),83==t&&(1>e&&this.quPos.push(new egret.Point(512,300)),this.quanPos.push(new egret.Point(this.selfParent["r_hit83_"+e].x,this.selfParent["r_hit83_"+e].y))),84==t&&(1>e&&this.quPos.push(new egret.Point(512,300)),this.quanPos.push(new egret.Point(this.selfParent["r_hit84_"+e].x,this.selfParent["r_hit84_"+e].y)));this.creatImg()},e.prototype.showQuestionsView=function(){for(var e=this.selfParent.r_0.parent,i=0,n=this.quNumAry;i<n.length;i++){var s=n[i];e.addChild(s)}for(var r=0,o=this.opNumAry;r<o.length;r++){var s=o[r];e.addChild(s)}for(var a=0,h=this.rectList;a<h.length;a++){var s=h[a];e.addChild(s)}t.prototype.initAddEvent.call(this)},e.prototype.setGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,n&&(n=n.split("img_num_")[1]),!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误");var s=new GlobalEvent(GlobalEvent.evt);s.b=t,this.selfParent.dispatchEvent(s)},e.prototype.showGameOverData=function(){var t=!0;this.rectList.length;for(var e in this.rigtData){var i=this.rigtData[e].name,n=void 0;if(this.curAnswerData[e]&&(n=this.curAnswerData[e].name,n&&(n=n.split("img_num_")[1]),!this.curAnswerData[e].name)){t=!1;break}if(i!=n){t=!1;break}}t?(egret.log("回答正确"+t),this.selfParent.testurl0.text="正确"):(egret.log("回答错误"+t),this.selfParent.testurl0.text="错误")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.clearAll(),this.opNumAry=[],this.quNumAry=[],this.opPos=[],this.quPos=[],this.wenhaoAry=[],this.rigtData=null,this.wenhaoObj=null,this.hitCurRectIndexObj=null},e.prototype.creatImg=function(){for(var t=this.curGameData.answer.split(","),e=this.curGameData.quetion,i=this.curGameData.opertion.split(","),n=i[0],s=[],r=(parseInt(this.curGameData.condition_id),0);r<t.length;r++){var o=void 0;if(0==r){o=e;var a=this.quPos[r],h=CommonDragonBones.getInstance().getElementImg(o);h.x=a.x,h.y=a.y,this.quNumAry.push(h)}o=t[r];var l=new eui.Rect,c=this.quanPos[r];l.width=l.height=60,l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.fillAlpha=0,l.name=o,l.x=c.x,l.y=c.y,s.push(l),this.rigtData[""+r]=l;var u=o+(s.length-1);this.hitCurRectIndexObj[u]=""+r;var p=n+(r+1),g=CommonDragonBones.getInstance().getElementImg(p);g.x=this.opPos[r].x,g.y=this.opPos[r].y,this.opNumAry.push(g)}this.imgList=this.opNumAry,this.rectList=s,this.showQuestionsView()},e.prototype.copyNewobj=function(t){var e=new eui.Rect;return e.fillAlpha=0,e.name=t.name,e.width=t.width,e.height=t.height,e.anchorOffsetX=t.width/2,e.anchorOffsetY=t.height/2,e.x=t.x,e.y=t.y,e},e.prototype.clearAll=function(){for(var t=0,e=this.quNumAry;t<e.length;t++){var i=e[t];i&&i.parent&&i.parent.removeChild(i)}},e}(CllickTouchScene);__reflect(SpecialControl80.prototype,"SpecialControl80");var CommonButton=function(t){function e(){var e=t.call(this)||this;return e.skinName="CommonButton_Skin",e}return __extends(e,t),e.prototype.setSrcName=function(t){this.imgSrcName.source=t},e.prototype.setConfig=function(){this.imgSrcName.anchorOffsetX=this.imgSrcName.width/2,this.imgSrcName.anchorOffsetY=this.imgSrcName.height/2},e}(eui.Button);__reflect(CommonButton.prototype,"CommonButton");var CommonMovieDlg=function(t){function e(){var e=t.call(this)||this;return e.skinName="Dlg_CommonMovie_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){null!=this.data&&(this._movieName=this.data.movie,this._movieCount=this.data.movieCount,this._soundName=this.data.sound,this._soundType=Number(this.data.soundType),this._playCount=Number(this.data.playCount),this._playCount<=0||void 0===this._playCount?this.playAction():(this._playIndex=0,this.playActionByCount()))},e.prototype.onDestroy=function(){},e.prototype.playAction=function(){},e.prototype.playActionByCount=function(){var t=App.RandomUtils.limitInteger(1,3),e="";switch(t){case 1:e="effect_bingo_1_mp3";break;case 2:e="effect_bingo_2_mp3";break;case 3:e="effect_bingo_3_mp3"}GM.sound.playEffect(e)},e.prototype.oveZmovieActCount=function(){this._playIndex>=this._playCount?(this.act.stop(),this.act.hasEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE)&&this.act.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.overZmovieAct,this),this.contains(this.act)&&this.removeChild(this.act),this.closeFunc()):(this.act.gotoAndPlay(0),this._playIndex++)},e.prototype.completeZmovieAct=function(){this.act.stop(),this.act.hasEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE)&&this.act.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.overZmovieAct,this),this.contains(this.act)&&this.removeChild(this.act)},e.prototype.overZmovieAct=function(t){var e=t.currentTarget;this.act&&(e.stop(),e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.overZmovieAct,this)),egret.Tween.get(this.act).to({alpha:0},1e3).call(this.completeZmovieAct,this).call(this.closeFunc,this)
},e.prototype.overAct=function(){egret.Tween.get(this.act).to({alpha:0},1e3).call(this.completeZmovieAct,this).call(this.closeFunc,this)},e.prototype.randomSoundEffect=function(t){var e=1==t?App.RandomUtils.limitInteger(1,3):App.RandomUtils.limitInteger(1,2),i="";if(1==t)switch(e){case 1:i="effect_bingo_1_mp3";break;case 2:i="effect_bingo_2_mp3";break;case 3:i="effect_bingo_3_mp3"}else if(2==t)switch(e){case 1:i="effect_error_1_mp3";break;case 2:i="effect_error_2_mp3"}if(""==i)return void this.overAct();var n=RES.getRes(i);if(!n)return void this.overAct();var s=n.play(0,1);s.addEventListener(egret.Event.SOUND_COMPLETE,this.overZmovieAct,this)},e.prototype.closeFunc=function(){this.onDlgClose(e.key)},e.key="CommonMovieDlg",e}(UIObject);__reflect(CommonMovieDlg.prototype,"CommonMovieDlg");var CommonSoundManage=function(t){function e(){var e=t.call(this)||this;return e.panelSoundAry=[],e.AppMp3Url="/sdcard/t1/resource/Game/assets/mp3/",e.curSoundIndex=0,e}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.randomSoundEffect=function(t){var e=1==t?App.RandomUtils.limitInteger(1,3):App.RandomUtils.limitInteger(1,2),i="";if(1==t)switch(e){case 1:i="r_1_mp3";break;case 2:i="r_2_mp3";break;case 3:i="r_3_mp3"}else if(2==t)switch(e){case 1:i="err_1_mp3";break;case 2:i="err_2_mp3";break;case 3:i="err_3_mp3"}if(!ConfigDataJson.getInstance().isPlay)if("Android"==Main.os){i=i.replace("_mp3",".mp3");var n=this.AppMp3Url+i;this.mp3=new Audio(n),this.mp3.play(),ConfigDataJson.getInstance().isPlay=!0;this.mp3.addEventListener("ended",function(){ConfigDataJson.getInstance().isPlay=!1,removeEventListener("ended",function(){},!1)},!1)}else{if(this.sound=RES.getRes(i),!this.sound)return;this.channel=this.sound.play(0,1),ConfigDataJson.getInstance().isPlay=!0,this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this)}},e.prototype.playSoundEffect=function(t){if(!ConfigDataJson.getInstance().isPlay)if("Android"==Main.os){t=t.replace("_mp3",".mp3");var e=this.AppMp3Url+t;this.mp3=new Audio(e),this.mp3.play(),ConfigDataJson.getInstance().isPlay=!0;this.mp3.addEventListener("ended",function(){ConfigDataJson.getInstance().isPlay=!1,removeEventListener("ended",function(){},!1)},!1)}else{if(this.sound=RES.getRes(t),!this.sound)return;this.channel=this.sound.play(0,1),ConfigDataJson.getInstance().isPlay=!0,this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this)}},e.prototype.playPanelEffect=function(){if(!ConfigDataJson.getInstance().isPlay){var t=this.panelSoundAry[this.curSoundIndex];if("Android"==Main.os){var e=this.AppMp3Url+t;this.mp3=new Audio(e),this.mp3.play(),ConfigDataJson.getInstance().isPlay=!0;this.mp3.addEventListener("ended",function(){ConfigDataJson.getInstance().isPlay=!1,removeEventListener("ended",function(){},!1)},!1)}else{if(this.sound=RES.getRes(t),!this.sound)return;this.channel=this.sound.play(0,1),ConfigDataJson.getInstance().isPlay=!0,this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this)}this.curSoundIndex++}},e.prototype.playSoundReturn=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,s;return __generator(this,function(r){switch(r.label){case 0:return egret.log(ConfigDataJson.getInstance().isPlay),ConfigDataJson.getInstance().isPlay?[2]:"Android"!=Main.os?[3,1]:(t=t.replace("_mp3",".mp3"),e=this.AppMp3Url+t,this.mp3=new Audio(e),this.mp3.play(),ConfigDataJson.getInstance().isPlay=!0,i=this,this.mp3.addEventListener("ended",function(){ConfigDataJson.getInstance().isPlay=!1,i.onSoundReturnComplete(null),removeEventListener("ended",function(){},!1)},!1),[3,3]);case 1:return[4,RES.getResAsync(t)];case 2:if(r.sent(),n=RES.getRes(t),!n)return[2];ConfigDataJson.getInstance().isPlay=!0,s=n.play(0,1),s.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundReturnComplete,[3]),r.label=3;case 3:return[2]}})})},e.prototype.stopAllSound=function(){this.sound&&this.sound.hasEventListener(egret.Event.SOUND_COMPLETE)&&this.sound.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this),this.channel&&this.channel.stop()},e.prototype.onSouncComplete=function(t){var e=t.currentTarget;e.stop(),ConfigDataJson.getInstance().isPlay=!1,e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this)},e.prototype.onSoundComplete=function(t){var e=t.currentTarget;e.stop(),ConfigDataJson.getInstance().isPlay=!1,e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this),this.curSoundIndex<=4?this.playPanelEffect():this.curSoundIndex=0},e.prototype.onSoundReturnComplete=function(t){if("Android"!=Main.os){var e=t.currentTarget;e.stop(),e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSouncComplete,this)}var i=new SoundCompleteEvent(SoundCompleteEvent.data);i.type="",egret.MainContext.instance.stage.dispatchEvent(i)},e}(UIObject);__reflect(CommonSoundManage.prototype,"CommonSoundManage");var WaitPanel=function(t){function e(e){void 0===e&&(e="");var i=t.call(this)||this;return i.w=0,i.h=0,i.curTipsStr=e,i.createView(),i}return __extends(e,t),e.prototype.destory=function(){egret.clearTimeout(this.timerId),this.rect&&this.rect.parent&&this.rect.parent.removeChild(this.rect)},e.prototype.createView=function(){this.count=0,this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.addMask();var t=CommonDragonBones.getInstance().getMoviclip("wait");t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=480,t.y=250,t.play(-1),this.addChild(t),this.tips=new eui.Label,this.tips.$alpha=.8,this.tips.fontFamily="ziti",this.tips.width=200,this.tips.text=this.curTipsStr,this.tips.x=512,this.tips.y=320,this.tips.visible=!0,this.tips.anchorOffsetX=100,this.addChild(this.tips),this.playTips(this.curTipsStr)},e.prototype.setTipsStr=function(t){this.curTipsStr=t},e.prototype.addMask=function(){this.rect=new eui.Rect,this.rect.width=this.w,this.rect.height=this.h,this.rect.alpha=.4,egret.MainContext.instance.stage.addChild(this.rect)},e.prototype.playTips=function(t){var e=t,i=".";e+=i,this.tips.text=e,6==this.count&&(e=this.curTipsStr,this.count=0);var n=this;this.timerId=setTimeout(function(){egret.clearTimeout(n.timerId),n.playTips(e)},300),this.count++},e}(egret.Sprite);__reflect(WaitPanel.prototype,"WaitPanel");var Version=function(){function t(){}return t.courseware_name="courseware_测试",t.VERSION="0.0.1",t}();__reflect(Version.prototype,"Version");var HttpControl=function(){function t(){this.curUrlStr="https://server.everobo.com/machine",this.initRequest()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.sendCodeMsg=function(t){this.curMsgType="code";var e=t.phone,i=this.curUrlStr+"/user/sendverifycode/"+e;this.sendMsg(i,t)},t.prototype.sendLoginGameMsg=function(t){this.curMsgType="login";var e=t.phone,i=this.curUrlStr+"/user/"+Main.devId+"/login/"+e;this.sendMsg(i,t)},t.prototype.sendReviewResultsmsg=function(t){this.curMsgType="review";var e=t.id,i=this.curUrlStr+"/content/"+Main.devId+"/report/"+e,n="Bearer "+Main.tokenId;this.sendMsg(i,t,n,"get")},t.prototype.sendMsgUserInfo=function(t){this.curMsgType="UserInfo";var e="Bearer "+Main.tokenId,i=(new egret.HttpRequest,this.curUrlStr+"/user/"+Main.devId);this.sendMsg(i,t,e)},t.prototype.sendStudyInfo=function(t){this.curMsgType="studyInfo";var e="Bearer "+Main.tokenId,i=(new egret.HttpRequest,this.curUrlStr+"/upload/"+Main.devId+"/content");this.sendMsg(i,t,e)},t.prototype.getSelf=function(){return this},t.prototype.initRequest=function(){this.xmlhttpRequest||(this.xmlhttpRequest=new XMLHttpRequest)},t.prototype.sendMsg=function(t,e,i,n){void 0===i&&(i=""),void 0===n&&(n="post"),"studyInfo"==this.curMsgType&&(ConfigDataJson.getInstance().isUploadData=!0),e=JSON.stringify(e),this.curData=e,egret.log("发送消息："+this.curMsgType+e),this.xmlhttpRequest.onreadystatechange=this.onPostComplete,this.xmlhttpRequest.open(n,t,!0),this.xmlhttpRequest.setRequestHeader("Content-Type","application/json; charset=utf-8;"),""!=i&&this.xmlhttpRequest.setRequestHeader("Authorization",i),e?this.xmlhttpRequest.send(e):this.xmlhttpRequest.send()},t.prototype.onPostComplete=function(e){var i=e.target.readyState,n=e.target.status,s=t.getInstance().getSelf(),r=e.target.response;egret.log("_readyState状态："+i+"  _status "+n),4==i&&200==n?(egret.log(s.curMsgType+": succes--数据-："+e.target.response),""!==r&&(r=JSON.parse(e.target.response)),"login"==s.curMsgType&&(r=new LoginData(r)),"UserInfo"==s.curMsgType&&(s.curMsgType="EnterGame"),"studyInfo"==this.curMsgType&&(ConfigDataJson.getInstance().isUploadData=!1,ConfigDataJson.getInstance().isQuit&&ConfigDataJson.getInstance().sendQuitGameMsg()),s.dipatchHttpEvt(r,s.curMsgType)):0!=i&&4==i&&("studyInfo"==this.curMsgType&&(ConfigDataJson.getInstance().isUploadData=!1,ConfigDataJson.getInstance().sendSaveRequest(this.curData)),egret.log(s.curMsgType+": 失败  "+r))},t.prototype.dipatchHttpEvt=function(t,e){var i=new GlobalEvent(GlobalEvent.evt);i.msgType=e,i.data=t,egret.MainContext.instance.stage.dispatchEvent(i)},t}();__reflect(HttpControl.prototype,"HttpControl");var CommonMovieManager=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(){lcp.LListener.getInstance().addEventListener("show_commonmovie",this.showCommonMovie,this)},t.prototype.showCommonMovie=function(t){t&&t.param&&GM.dlg.popDlg(CommonMovieDlg,"",null,t.param)},t.prototype.showSuccess=function(){GM.dlg.popDlg(CommonMovieDlg,"successCaiDai",null,{movie:"caidai",movieCount:7,playCount:2})},t}();__reflect(CommonMovieManager.prototype,"CommonMovieManager");var WaitManager=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(){this.waitPanel=null},t.prototype.showWaritPanel=function(t){this.waitPanel||(this.waitPanel=new WaitPanel),this.waitPanel.setTipsStr(t),egret.MainContext.instance.stage.addChild(this.waitPanel)},t.prototype.hideWaritPanel=function(){this.waitPanel&&egret.MainContext.instance.stage.contains(this.waitPanel)&&(this.waitPanel.destory(),egret.MainContext.instance.stage.removeChild(this.waitPanel))},t}();__reflect(WaitManager.prototype,"WaitManager");var EndView=function(t){function e(){var e=t.call(this)||this;return e.skinName="EndView_Skin",e.onAdd(),e}return __extends(e,t),e.prototype.onAdd=function(){this.initScene(),this.initAddEvent()},e.prototype.initScene=function(){clearGif(),this.score_txt.text="",this.time_txt_0.text="",this.time_txt_1.text="",this.score_txt.text=100-3*ConfigDataJson.getInstance().erroCount+"";var t=this.getTime(ConfigDataJson.getInstance().totalTime),e=t.split(":"),i=(parseInt(e[0]),parseInt(e[1])),n=parseInt(e[2]);this.time_txt_0.text=i+"",this.time_txt_1.text=n+"";ConfigDataJson.getInstance().age;this.dui.text="答对的题目："+ConfigDataJson.getInstance().rightCount,this.cuo.text="答错的题目："+ConfigDataJson.getInstance().erroCount,this.age.text="年龄："+ConfigDataJson.getInstance().age+" 岁",this.time.text="用时："+ConfigDataJson.getInstance().totalTime+" 秒","1"!=ConfigDataJson.getInstance().mode&&this.upLoadStudyData()},e.prototype.initAddEvent=function(){egret.MainContext.instance.stage.addEventListener(GlobalEvent.evt,this.httpMsgReturn,this)},e.prototype.httpMsgReturn=function(t){"studyInfo"==t.msgType&&egret.log("上传成功")},e.prototype.upLoadStudyData=function(){var t=Date.parse(new Date+""),e=ConfigDataJson.getInstance().rightCount/(ConfigDataJson.getInstance().erroCount+ConfigDataJson.getInstance().rightCount);e=Math.round(100*e)/100;var i=new Object;i.deviceId=Main.devId,i.level="1",i.number="L0000",i.type=0,i.score=parseInt(this.score_txt.text),i.startTime=ConfigDataJson.getInstance().startTime,i.endTime=t,i.duration=ConfigDataJson.getInstance().totalTime,i.accuracy=e,i.wrong=ConfigDataJson.getInstance().erroCount,HttpControl.getInstance().sendStudyInfo(i)},e.prototype.getTime=function(t){var e;if(t>-1){var i=Math.floor(t/3600),n=Math.floor(t/60)%60,s=t%60;e=10>i?"0"+i+":":i+":",10>n&&(e+="0"),e+=n+":",10>s&&(e+="0"),e+=s.toFixed(2)}return e},e}(UIObject);__reflect(EndView.prototype,"EndView");var LoginControl=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(){egret.MainContext.instance.stage.addEventListener(GlobalEvent.evt,this.changeView,this)},t.prototype.addLogin=function(){this.loginView=new LoginView,this.loginView.onAdd(),egret.MainContext.instance.stage.addChild(this.loginView)},t.prototype.changeView=function(t){if("OpenUserView"==t.data)this.loginView.onDestroy(),this.userInfoView=new UserInfoView,this.userInfoView.onAdd(),egret.MainContext.instance.stage.addChild(this.userInfoView);else if("EnterGame"==t.msgType)this.userInfoView&&this.userInfoView.onDestroy(),1==egret.Capabilities.isMobile&&(egret.MainContext.instance.stage.orientation=egret.OrientationMode.LANDSCAPE,egret.MainContext.instance.stage.stageHeight/egret.MainContext.instance.stage.stageWidth<1.77?egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT:egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,egret.MainContext.instance.stage.setContentSize(1024,600),egret.MainContext.instance.stage.stage.orientation=egret.OrientationMode.LANDSCAPE,egret.MainContext.instance.stage.stage.scaleMode=egret.StageScaleMode.EXACT_FIT),CommunicationManager.getInstance().goTargetPageHandle(1);else if("OpenEndView"==t.msgType)this.userInfoView&&this.userInfoView.onDestroy(),this.endView=new EndView,egret.MainContext.instance.stage.addChild(this.endView);else if("review"==t.msgType){var e=t.data;if(t.data.wrong){ConfigDataJson.getInstance().rightCount=e.score,ConfigDataJson.getInstance().erroCount=e.wrong,ConfigDataJson.getInstance().setAge(Main.birthday),ConfigDataJson.getInstance().totalTime=e.cost;var i=new GlobalEvent(GlobalEvent.evt);i.msgType="OpenEndView",egret.MainContext.instance.stage.dispatchEvent(i)}else{var n="EnterGame",s=new GlobalEvent(GlobalEvent.evt);s.msgType=n,egret.MainContext.instance.stage.dispatchEvent(s)}}},t}();__reflect(LoginControl.prototype,"LoginControl");var LoginView=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoginView_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.initScene(),this.initAddEvent()},e.prototype.txtFocusOutEvt=function(t){var e=t.currentTarget,i=(e.name,ConfigDataJson.getInstance().checkMobile(this.label_0.text));i||(this.tips_0.text="请填写正确的手机号")},e.prototype.onDestroy=function(){this.clearEvt(),this.txt_djs.text="",this.timer.reset(),this.timer.stop(),this.btn_code.visible=!0,this.gp_djs.visible=!1,this.countTime=20,egret.MainContext.instance.stage.removeChild(this)},e.prototype.initScene=function(){this.countTime=20,this.gp_djs.visible=!1,this.showText(),clearGif()},e.prototype.initAddEvent=function(){this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnLoginBegin,this),this.btn_code.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnCodeBegin,this),egret.MainContext.instance.stage.addEventListener(GlobalEvent.evt,this.httpMsgReturn,this)},e.prototype.showText=function(){for(var t=0;2>t;t++){this["label_"+t]=new egret.TextField;var e=this["label_"+t];e.fontFamily="ziti",e.text="",e.type=egret.TextFieldType.INPUT,e.width=241,e.height=41,e.name="label_"+t,e.maxChars=14,e.size=30,e.textColor=39168,e.textAlign=egret.HorizontalAlign.CENTER,e.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(e),e.x=this["img_"+t].x,e.y=this["img_"+t].y,1==t&&(e.maxChars=6),e.addEventListener(egret.TouchEvent.FOCUS_IN,this.txtFocusInEvt,this),e.addEventListener(egret.TouchEvent.FOCUS_OUT,this.txtFocusOutEvt,this),e.addEventListener(egret.Event.CHANGE,this.txtChangeEvt,this)}},e.prototype.txtFocusInEvt=function(t){var e=t.currentTarget,i=e.name;switch(i){case"label_0":this.tips_0.text="";break;case"label_1":this.tips_1.text="",this.label_1.textColor=39168,this.label_1.text=""}},e.prototype.txtChangeEvt=function(t){var e=t.currentTarget;e.name},e.prototype.clickBtnLoginBegin=function(){if(this.cheackInputTxt()){var t=new Object;t.phone=this.label_0.text,t.code="000000",HttpControl.getInstance().sendLoginGameMsg(t)}},e.prototype.clickBtnCodeBegin=function(){if(""!=this.label_0.text){var t=ConfigDataJson.getInstance().checkMobile(this.label_0.text);if(!t)return;this.startDjs();var e=new Object;e.phone=this.label_0.text,HttpControl.getInstance().sendCodeMsg(e)}else this.cheackInputTxt()},e.prototype.cheackInputTxt=function(){var t=!1;return""==this.label_0.text?void(this.tips_0.text="请填写手机号"):(t=ConfigDataJson.getInstance().checkMobile(this.label_0.text))?""==this.label_1.text?void(this.tips_1.text="请输入验证码"):t=!0:(this.tips_0.text="请填写正确的手机号",t)},e.prototype.httpMsgReturn=function(t){if("login"==t.msgType)if(t.data.code){var e=t.data.code;400==e&&(this.tips_1.text="验证码有误")}else if(""!=t.data.token){Main.tokenId=t.data.token;var i=t.data.birthday;if(ConfigDataJson.getInstance().setAge(i),0==i){var n=new GlobalEvent(GlobalEvent.evt);n.data="OpenUserView",egret.MainContext.instance.stage.dispatchEvent(n)}else var s=this,r=setTimeout(function(){egret.clearTimeout(r),s.getReviewResults()},500)}if("review"==t.msgType)if(t.data.wrong){ConfigDataJson.getInstance().rightCount=t.data.score,ConfigDataJson.getInstance().erroCount=t.data.wrong,ConfigDataJson.getInstance().totalTime=t.data.cost;var n=new GlobalEvent(GlobalEvent.evt);n.msgType="OpenEndView",egret.MainContext.instance.stage.dispatchEvent(n)}else{this.onDestroy();var o="EnterGame",n=new GlobalEvent(GlobalEvent.evt);n.msgType=o,egret.MainContext.instance.stage.dispatchEvent(n)}},e.prototype.getReviewResults=function(){var t=new Object;t.deviceId=Main.devId,t.id=1,t.number="L0000",HttpControl.getInstance().sendReviewResultsmsg(t)},e.prototype.startDjs=function(){var t=this;this.gp_djs.visible=!0,this.txt_djs.text=this.countTime+"",this.btn_code.visible=!1,this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,function(e){t.countTime--,t.txt_djs.text=t.countTime+"",t.countTime<=0&&(t.txt_djs.text="",t.timer.reset(),t.timer.stop(),t.btn_code.visible=!0,t.gp_djs.visible=!1,t.countTime=20)},this),this.timer.start()},e.prototype.onResUILoadComplete=function(){egret.log("题库资源加载完成")},e.prototype.clearEvt=function(){this.btn_ok.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnLoginBegin,this),this.btn_code.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickBtnCodeBegin,this),egret.MainContext.instance.stage.removeEventListener(GlobalEvent.evt,this.httpMsgReturn,this)},e}(UIObject);__reflect(LoginView.prototype,"LoginView");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.coursewareName="Game",this.resIndex=0,this.initEgretConfig(),GM.init(),this.addChild(GameLayerManager.gameLayer()),this.runGame()["catch"](function(t){Log.trace("msg",t)})},e.prototype.initEgretConfig=function(){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){},egret.ImageLoader.crossOrigin="anonymous",RES.setMaxLoadingThread(8);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter)},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),[4,RES.loadConfig("resource/gamemain/default.res.json","/resource")];case 1:return e.sent(),[4,RES.loadConfig("resource/"+this.coursewareName+"/"+this.coursewareName+".res.json","/resource")];case 2:return e.sent(),[4,this.loadTheme()];case 3:return e.sent(),[4,this.loadCoursewareTheme()];case 4:return e.sent(),ResLoad.getInstance().LoadRes("preload",new Handler(this,this.onResourceLoadComplete)),ResLoad.getInstance().LoadRes(this.coursewareName+"_preload",new Handler(this,this.onResourceLoadComplete)),[3,6];case 5:return t=e.sent(),console.error(t),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/gamemain/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadCoursewareTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/"+t.coursewareName+"/"+t.coursewareName+".thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.onResourceLoadComplete=function(){this.resIndex++,this.resIndex>=2&&(CommunicationManager.getInstance().init(this.coursewareName),this.createGameScene())},e.prototype.createGameScene=function(){e.devId="a8f591b52d302e7181331",e.mode="0",e.birthday="1581929020123",e.tokenId="eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhOGY1OTFiNTJkMzAyZTcxODEzMzEtMTAwMDAwMDEiLCJleHAiOjE2Mjk2OTIxMzB9.x6GaOoeMe5LF-weQHrqHUMZy73o7EUys3YJ54IhXV6pgTFO1bWm7T6hrzUWeUxO13EdX-nLLdjNGnyF0Lhja8Q";var t=new Date,i=t.getSeconds();egret.log(i+"秒"),ResLoad.getInstance().LoadRes("UI_load",new Handler(this,this.onResUILoadComplete)),ResLoad.getInstance().LoadRes("UI_load_1",new Handler(this,this.onResUILoadComplete)),ConfigDataJson.getInstance().mode=e.mode,LoginControl.getInstance().init(),1==egret.Capabilities.isMobile?(this.stage.orientation=egret.OrientationMode.LANDSCAPE,this.stage.scaleMode=egret.StageScaleMode.EXACT_FIT):(this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL);egret.Capabilities;e.os=GM.gamec.systemType();var n=new eui.Label;n.fontFamily="ziti",n.text="1234567890",n.x=-300,n.visible=!0,this.addChild(n);var s=this;setTimeout(function(){s.creatLoginView()},200)},e.prototype.GetQueryString=function(){e.devId=ConfigDataJson.getInstance().getOption("deviceId"),e.tokenId=ConfigDataJson.getInstance().getOption("token"),e.mode=ConfigDataJson.getInstance().getOption("mode"),e.birthday=ConfigDataJson.getInstance().getOption("birthday"),""!=e.birthday&&ConfigDataJson.getInstance().setAge(e.birthday),egret.log("获取URL-devID"+e.devId),egret.log("获取URL-tokenId"+e.tokenId),egret.log("获取URL-mode"+e.mode),egret.log("获取URL-birthday"+e.birthday)},e.prototype.creatLoginView=function(){if("1"==e.mode){clearGif();var t=new Object;t.deviceId=e.devId,t.id=1,t.number="L0000",HttpControl.getInstance().sendReviewResultsmsg(t)}else"0"==e.mode&&LoginControl.getInstance().addLogin()},e.prototype.loadMp3Resource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,ResLoad.getInstance().LoadRes("Mp3_load_1",new Handler(this,this.onResUILoadComplete))];case 1:return e.sent(),[4,ResLoad.getInstance().LoadRes("Mp3_load_2",new Handler(this,this.onResUILoadComplete))];case 2:return e.sent(),[4,ResLoad.getInstance().LoadRes("Mp3_load_3",new Handler(this,this.onResUILoadComplete))];case 3:return e.sent(),t=this,[2]}})})},e.prototype.loadNextMp3Resource=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return egret.log("加载第4组资源"),ConfigDataJson.getInstance().age=5,CommunicationManager.getInstance().goTargetPageHandle(1),[4,ResLoad.getInstance().LoadRes("Mp3_load_4",new Handler(this,this.onResUILoadComplete))];case 1:return t.sent(),[2]}})})},e.prototype.onResUILoadComplete=function(t){egret.log("题库资源组:"+t+"加载完成");var e=new Date,i=e.getSeconds();egret.log(i+"秒"),"Mp3_load_3"==t&&this.loadNextMp3Resource()},e.prototype.beforePage=function(){var t=getWifiStatus();egret.log("获取状态"+t)},e.prototype.afterPage=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CallAppBackControl=function(){function t(){}return t.prototype.callH5Msg=function(t){},t}();__reflect(CallAppBackControl.prototype,"CallAppBackControl");var GlobalEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.evt="GlobalEvent",e}(egret.Event);__reflect(GlobalEvent.prototype,"GlobalEvent");var SoundCompleteEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.data="SoundCompleteEvent",e}(egret.Event);__reflect(SoundCompleteEvent.prototype,"SoundCompleteEvent");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.split("/");a.pop();var h=a.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var LoginData=function(){function t(t){this.token=t.token,this.name=t.name,this.birthday=t.birthday,this.sex=parseInt(t.sex)}return t}();__reflect(LoginData.prototype,"LoginData");var StudyInfoData=function(){function t(){this.deviceId="",this.level="",this.resId="",this.resNumber="",this.type="",this.score=0,this.startTime=0,this.endTime=0,this.duration=0,this.accuracy=0,this.wrong=0,this.observation=0,this.attention=0,this.memory=0,this.spatial=0,this.calculate=0,this.imagination=0,this.creativity=0,this.judgement=0,this.analysis=0,this.summarization=0,this.ratiocination=0,this.understanding=0,this.sparkid="",this.sparktime=0,this.sparkcontent=0,this.id="",this.desc=""}return t.prototype.setData=function(){var t={deviceId:this.deviceId,level:this.level,id:this.resId+"",number:this.resNumber+"",type:this.type+"",score:this.score+"",startTime:this.startTime+"",endTime:this.endTime+"",duration:this.duration+"",accuracy:this.accuracy+"",wrong:this.wrong+"",ability:{observation:this.observation+"",attention:this.attention+"",memory:this.memory+"",spatial:this.spatial+"",calculate:this.calculate,imagination:this.imagination+"",creativity:this.creativity+"",judgement:this.judgement+"",analysis:this.analysis+"",summarization:this.summarization+"",ratiocination:this.ratiocination+"",understanding:this.understanding+""},spark:{sparkid:this.sparkid+"",sparktime:this.sparktime+"",sparkcontent:this.sparkcontent+""},wrongResult:[{id:this.id+"",desc:this.desc+""}]};this.studyData=t},t}();__reflect(StudyInfoData.prototype,"StudyInfoData");var UserInfoData=function(){function t(t){}return t}();__reflect(UserInfoData.prototype,"UserInfoData");var zmovie;!function(t){var e=function(e){function i(t,i,n){var s=e.call(this)||this;return s.setObject(t,i,n),s}return __extends(i,e),i.prototype.setObject=function(e,i,n){if(this.libObj!=i||this.libName!=n){this.libName=n,this.libObj=i,t.Util.clearDisposeDisplay(this);for(var s=t.Util.getTextureArrByName(e,i,n),r=s.length,o=r-1;o>=0;o--){var a=s[o],h=new egret.Bitmap;h.touchEnabled=!1,h.texture=a.t,h.x=a.x/i.scale,h.y=a.y/i.scale,this.addChild(h)}}},i}(egret.DisplayObjectContainer);t.LargeImage=e,__reflect(e.prototype,"zmovie.LargeImage")}(zmovie||(zmovie={}));var zmovie;!function(t){var e=function(){function t(){this.isTop=!1,this.width=0/0,this.height=0/0,this.topR=0/0,this.bottomR=0/0,this.tPoint=new egret.Point,this.bPoint=new egret.Point,this.Op=new egret.Point,this.mPoint=new egret.Point,this.dia=0/0,this.speed=1,this.tmpSpeed=1}return Object.defineProperty(t.prototype,"O",{set:function(t){this.Op=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),t.prototype.setSize=function(t,e,i){this._point=new egret.Point,this.width=t,this.height=e,this.topR=Math.sqrt(t*t+e*e),this.tPoint=new egret.Point(this.Op.x,this.Op.y-e/2),this.bPoint=new egret.Point(this.Op.x,this.Op.y+e/2),this.dia=Math.sqrt(this.width*this.width+this.height*this.height),this.update(i.x,i.y),this.speed=this.tmpSpeed},t.prototype.changeTo=function(t){"top"==t?this.isTop||this.change():"bottom"==t&&this.isTop&&this.change()},t.prototype.close=function(){this._point.x=this.width,this._point.y=this.height},t.prototype.update=function(t,e){var i=0;this.mPoint.x=t,this.mPoint.y=e,!this.isTop&&e<=this.Op.y+this.height/2||this.isTop&&e>=this.Op.y-this.height/2?this.getDis(this.bPoint.x,this.bPoint.y,t,e)<=this.width?(this._point.x=t,this._point.y=e):(i=this.getAngleByPoint(this.bPoint.x,this.bPoint.y,t,e),this._point.x=Math.cos(i)*this.width+this.bPoint.x,this._point.y=Math.sin(i)*this.width+this.bPoint.y):this.getDis(this.tPoint.x,this.tPoint.y,t,e)<=this.dia?(this._point.x=t,this._point.y=e):(i=this.getAngleByPoint(this.tPoint.x,this.tPoint.y,t,e),this._point.x=Math.cos(i)*this.dia+this.tPoint.x,this._point.y=Math.sin(i)*this.dia+this.tPoint.y),this._point.x<this.Op.x-this.width&&(this._point.x=this.Op.x-this.width,this.isTop?this._point.y=this.Op.y-this.height/2:this._point.y=this.Op.y+this.height/2),this._point.x>this.Op.x+this.width&&(this._point.x=this.Op.x+this.width,this.isTop?this._point.y=this.Op.y-this.height/2:this._point.y=this.Op.y+this.height/2)},t.prototype.change=function(){var t=new egret.Point(this.tPoint.x,this.tPoint.y);return this.tPoint.x=this.bPoint.x,this.tPoint.y=this.bPoint.y,this.bPoint.x=t.x,this.bPoint.y=t.y,this.isTop=!this.isTop,this.isTop},t.prototype.getDis=function(t,e,i,n){var s=Math.abs(t-i),r=Math.abs(e-n);return Math.sqrt(s*s+r*r)},t.prototype.getAngleByPoint=function(t,e,i,n){return Math.atan2(n-e,i-t)},t}();t.LimitPoint=e,__reflect(e.prototype,"zmovie.LimitPoint")}(zmovie||(zmovie={}));var zmovie;!function(zmovie){var Util=function(){function Util(){}return Util.clone=function(t){function e(t){function i(){}i.prototype=t;var n=new i;for(var s in n)"object"==typeof n[s]&&(n[s]=e(n[s]));return n}var i=e(t);return i},Util.setStage=function(t){Util.stage=t,this.setStageWH(t.stageWidth,t.stageHeight),this.checkMinR=Math.PI/4,this.scnum=0,this.minCheckLen=100*this.powerScale,this.checkLen=this.checkArr.length,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,Util.touchHandle,this)},Util.isObjContent=function(t){for(var e in t)return!0;return!1},Util.showLog=function(t,e){void 0===e&&(e=3e3);var i=new egret.TextField;i.bold=!0,i.size=50*Util.powerScale,i.textColor=16777215,i.text=t,i.filters=[new egret.GlowFilter(0)],Util.stage.addChild(i),i.x=i.stage.stageWidth-i.width>>1,i.y=i.stage.stageHeight-i.height>>1,egret.setTimeout(Util.closeLog,this,e,i)},Util.encrypt=function(t,e){for(var i="",n=t.length-1;n>=0;n--){var s=t.charCodeAt(n);s+=e,i+=String.fromCharCode(s)}return i},Util.formatNum=function(t,e){return void 0===e&&(e=2),Number(t.toFixed(e))
},Util.getDist=function(t,e,i,n,s){void 0===s&&(s=!0);var r=i-t,o=n-e,a=Math.sqrt(r*r+o*o);return s&&(a=Math.abs(a)),a},Util.clearDisposeDisplay=function(t){try{for(var e=void 0,i=t.numChildren-1;i>=0;i--)e=t.getChildAt(i),t.removeChild(e)}catch(n){}},Util.setStageWH=function(t,e){t>e?Util.powerScale=e/1536:Util.powerScale=t/1536,Util.stageWidth=t,Util.stageHeight=e},Util.getTextureArrByName=function(t,e,i){var n=[],s=Util.getTextureByName(t,i);if(null==s){var r=e.clipping[i];if(null!=r)for(var o=r.length-1;o>=0;o--){if(s=Util.getTextureByName(t,r[o].name),null==s)return n;n.push({t:s,x:r[o].x,y:r[o].y})}return n}return n.push({t:s,x:0,y:0}),n},Util.getFilters=function(arr){for(var i=arr.length-1;i>=0;i--)try{var fo=arr[i];if(null==fo.name)continue;var fName=fo.name;fName=fName.substr(fName.lastIndexOf(":")+1);var fobj=null;eval("fobj = new egret."+fName+"();");for(var keystr in fo)if("name"!=keystr)try{fobj[keystr]=fo[keystr]}catch(err){}arr[i]=fobj}catch(err){}return arr},Util.getTextureByName=function(t,e){var i=null;if(t instanceof Array)try{for(var n=t,s=n.length-1;s>=0;s--){var r=RES.getRes(n[s]+"."+e);if(null!=r)return r}}catch(o){}else try{i=RES.getRes(t+"."+e)}catch(o){}return i},Util.isoToScreen=function(t){var e=t.x-t.z,i=t.y*zmovie.Util.Y_CORRECT+.5*(t.x+t.z);return new egret.Point(e,i)},Util.screenToIso=function(t,e){void 0===e&&(e=null);var i=t.y+.5*t.x,n=0,s=t.y-.5*t.x;return null==e?new ztiledmap.Point3D(i,n,s):(e.x=i,e.y=n,e.z=s,e)},Util.touchHandle=function(t){egret.TouchEvent.TOUCH_BEGIN==t.type?(Util.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,Util.touchHandle,this),Util.stage.addEventListener(egret.TouchEvent.TOUCH_END,Util.touchHandle,this),this.pto=[],this.pto.unshift({x:t.stageX,y:t.stageY})):egret.TouchEvent.TOUCH_MOVE==t.type?this.pto.unshift({x:t.stageX,y:t.stageY}):(Util.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,Util.touchHandle,this),Util.stage.removeEventListener(egret.TouchEvent.TOUCH_END,Util.touchHandle,this),null==this.touchCatch&&(this.touchCatch=[]),this.touchCatch.unshift(this.pto),this.checkTouchCatch())},Util.checkTouchCatch=function(){var t=this.touchCatch.length;if(this.checkLen-this.scnum<=t)for(var e=t-1;e>=0&&(this.checkTouchR(this.checkArr[this.scnum],this.checkTouchArr(this.touchCatch[e]))?(this.scnum+=1,this.scnum>=this.checkLen&&(this.scnum=0,Util.showLog(this.encrypt("兾巬皋帏唫右央'I'yl~vW",-7)+" ver:"+Util.VER))):this.scnum=0,this.touchCatch.splice(e,1),0!=this.scnum);e--);},Util.closeLog=function(t){null!=t.parent&&t.parent.removeChild(t)},Util.checkTouchR=function(t,e){var i=Math.abs(e.r-t.r);if(i>this.checkMinR)return!1;if(i=Math.abs(e.rr-t.rr),i>this.checkMinR)return!1;if(i=Math.abs(e.lr-t.lr),i>this.checkMinR)return!1;var n=t.zd,s=e.zd;if(null==n&&null==s)return!0;if(null==n||null==s)return!1;if(n.length!=s.length)return!1;for(var r=n.length-1;r>=0;r--)if(i=Math.abs(n[r]-s[r]),i>this.checkMinR)return!1;return!0},Util.checkTouchArr=function(t){for(var e,i,n=null,s=0,r=0,o=0,a=0,h=t.length-1;h>=0;h--){var l=t[h];if(null!=n){var c=this.getDist(n.x,n.y,l.x,l.y);if(c<this.minCheckLen)continue;var u=Math.atan2(l.y-n.y,l.x-n.x);if(!isNaN(e)){var p=u-e,g=Math.abs(p);Math.PI<g&&(g-=2*Math.PI+(Math.PI-Math.abs(u)),g=Math.abs(g),p=l.x<n.x?-g:g),s+=p,0>p?o+=p:a+=p,g>this.checkMinR?r+=p:(0!=r&&(null==i&&(i=[]),i.push(r)),r=0)}e=u}n=l}return{r:s,lr:o,rr:a,zd:i}},Util.VER="0.0.2",Util.powerScale=1,Util.Y_CORRECT=Math.cos(-Math.PI/6)*Math.SQRT2,Util.checkArr=[{rr:.2616,zd:[-1.3355],r:-2.1914,lr:-2.453},{rr:.037,r:0,lr:-.037},{rr:.1582,r:-.037,lr:-.1953},{rr:.6254,r:.6254,lr:0},{rr:.0638,r:-.1269,lr:-.1907},{rr:.1185,r:.0417,lr:-.0768},{rr:3.0329,zd:[2.3565,-2.4235],r:-.1354,lr:-3.1683}],Util}();zmovie.Util=Util,__reflect(Util.prototype,"zmovie.Util")}(zmovie||(zmovie={}));var zmovie;!function(t){var e=function(){function t(){}return t}();t.ZAssetManager=e,__reflect(e.prototype,"zmovie.ZAssetManager")}(zmovie||(zmovie={}));var ZFlipBook=function(t){function e(e,i){var n=t.call(this)||this;return n.speed=.5,n.isEndPage=!1,n.currentPaper=null,n.isMoveing=!1,n.widxwid=0/0,n.scaleR=0/0,n.tP=new egret.Point,n.isDown=!1,n.fp=new egret.Point,n.isDragStart=!1,n.dempP=new egret.Point,n.lrType=0,n.isReady=!0,n.dragMinNum=0,null==e&&null==i?n:(n.lpaper=e,n.rpaper=i,null!=e?(n.w=e.width,n.h=e.height,e.x=-n.w,n.addChild(e)):(n.w=i.width,n.h=i.height),n.init(n.w,n.h),null!=e?n.addPaper(i,new zmovie.ZMovieClip(e.imgArr,e.libObj,e.mcName)):n.addPaper(i,new zmovie.ZMovieClip(i.imgArr,i.libObj,e.mcName)),n)}return __extends(e,t),Object.defineProperty(e.prototype,"currPage",{get:function(){return this._currPage},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){this.w=t,this.h=e,this.paperArr=[],this.rightPagesArr=[],this.leftPagesArr=[],this.pageContent=[],this.book=new egret.Sprite,this._currPage=1,this.addChild(this.book),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this),this.anchorOffsetX=-t,this.shadowfm_img=new egret.Sprite,this.shadowfm_img.touchEnabled=!1;var i=this.getShape(100,100,0);this.shadowfm_img.addChild(i),this.shadowfrm_img=this.getShape(100,100,0),this.shadowfrm_img.touchEnabled=!1,this.shadowfrm_img.anchorOffsetX=this.shadowfrm_img.width>>1,this.shadowfrm_img.width=2*t,this.shadowfrm_img.height=e,i.width=t,i.height=e,this.shadowfm_img.x=0,this.shadowfm_img.y=-150,this.shadowf_img=this.getTexture("ShadowF"),this.shadowf_img.touchEnabled=!1,this.shadowfr_img=this.getTexture("ShadowFR"),this.shadowfr_img.anchorOffsetY=this.shadowfr_img.height>>1,this.shadowfr_img.touchEnabled=!1,this.shadowfr_img.height=this.shadowf_img.height=2*Math.sqrt(t*t+e*e),this.shadowf_img.anchorOffsetX=this.shadowf_img.width,this.shadowf_img.anchorOffsetY=this.shadowf_img.height>>1,this.shadowfr_img.alpha=0},e.prototype.addDefaultPaper=function(){return this.addPaper(new zmovie.ZMovieClip(this.lpaper.imgArr,this.lpaper.libObj,this.lpaper.mcName),new zmovie.ZMovieClip(this.rpaper.imgArr,this.rpaper.libObj,this.lpaper.mcName))},e.prototype.addPaper=function(t,i){this.paperArr.push(t),this.paperArr.push(i),t.touchEnabled=!0,i.touchEnabled=!0;var n=new ZPaper(t,i,this.w,this.h);return this.pageContent.push(n),2>this.book.numChildren&&this.book.addChildAt(n,0),this.rightPagesArr.push(n),null==this.currentPaper&&(this.currentPaper=n),this.dispatchEventWith(e.EVENT_PAGE_ADD,!1,n),n},e.prototype.getPageContent=function(){return this.pageContent},e.prototype.next=function(){if(this.isMoveing){null==this.contralCatch&&(this.contralCatch=[]);var t=this.contralCatch.length;if(t>0){var e=this.contralCatch[t-1];if(e==this.prev)return void this.contralCatch.pop()}return void this.contralCatch.push(this.next)}this.rightPagesArr.length?this.nextFun(this.rightPagesArr[0]):this.nextCatch()},e.prototype.getIsMoveing=function(){return this.isMoveing},e.prototype.advanceTime=function(){this.update()},e.prototype.prev=function(){if(this.isMoveing){null==this.contralCatch&&(this.contralCatch=[]);var t=this.contralCatch.length;if(t>0){var e=this.contralCatch[t-1];if(e==this.next)return void this.contralCatch.pop()}return void this.contralCatch.push(this.prev)}this.leftPagesArr.length?this.prevFun(this.leftPagesArr[this.leftPagesArr.length-1]):this.nextCatch()},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.touchFun=function(t){var e=new egret.Point(t.stageX,t.stageY),i=this.book.globalToLocal(t.stageX,t.stageY);if(egret.TouchEvent.TOUCH_BEGIN==t.type){if(this.isMoveing)return;if(this.tP.x=i.x,this.tP.y=i.y,this.dir=this.getDir(i.x,i.y),this.resetFp(this.dir),this.cp=null,"TL"==this.dir?this.leftPagesArr.length&&(this.cp=this.leftPagesArr[this.leftPagesArr.length-1]):"TR"==this.dir?this.rightPagesArr.length&&(this.cp=this.rightPagesArr[0]):"BL"==this.dir?this.leftPagesArr.length&&(this.cp=this.leftPagesArr[this.leftPagesArr.length-1]):"BR"==this.dir&&this.rightPagesArr.length&&(this.cp=this.rightPagesArr[0]),null==this.cp)return;if(("TR"==this.dir||"BR"==this.dir)&&!this.isEndPage&&1==this.rightPagesArr.length)return void(this.cp=null);this.isDown=!0,this.isDragStart=!1,this.downPoint=e,this.dragStart(e)}},e.prototype.getShape=function(t,e,i){var n=new egret.Shape;return n.graphics.beginFill(i),n.graphics.drawRect(0,0,t,e),n},e.prototype.getTexture=function(t){var e,i;return"ShadowF"==t?(e=new egret.Shape,i=new egret.Matrix,i.createGradientBox(126,200),e.graphics.beginGradientFill(egret.GradientType.LINEAR,[16777215,16777215,16777215,0],[0,.1,.2,.2],[0,127,178,255],i),e.graphics.drawRect(0,0,126,200),e):"ShadowFR"==t?(e=new egret.Shape,i=new egret.Matrix,i.createGradientBox(100,100),e.graphics.beginGradientFill(egret.GradientType.LINEAR,[0,0,0],[.5,.2,0],[0,117,255],i),e.graphics.drawRect(0,0,100,100),e):null},e.prototype.nextFun=function(t){if(this.isEndPage||1!=this.rightPagesArr.length){this.dir="BR",this.resetFp(this.dir),this.currentPaper=t,this.book.setChildIndex(this.currentPaper,this.book.numChildren-1),this.currentPaper.setCor(this.dir),this.widxwid=this.w*this.w,this.fadeInShadow(),this.scaleR=Math.floor(.5*Math.random()*1e3)/1e3,this.fp.x=this.w,this.fp.y=this.h,this.moveStart(this.dir),this.initDempP("BL");var e=egret.Tween.get(this.fp,{onChange:this.autoUpdate,onChangeObj:this});e.to({x:this.dempP.x},this.speed,egret.Ease.elasticOut),e.call(this.autoCompleteL,this),this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this)}},e.prototype.prevFun=function(t){this.dir="BL",this.resetFp(this.dir),this.moveStart(this.dir),this.currentPaper=t,this.book.setChildIndex(this.currentPaper,this.book.numChildren-1),this.currentPaper.setCor(this.dir),this.widxwid=this.w*this.w,this.fadeInShadow(),this.scaleR=Math.floor(.5*Math.random()*1e3)/1e3,this.fp.x=-this.w,this.fp.y=this.h,this.initDempP("BR"),this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this)},e.prototype.autoUpdate=function(){this.fp.y=this.h-Math.sqrt(this.widxwid-this.fp.x*this.fp.x)*this.scaleR},e.prototype.autoCompleteR=function(){this.isDown=!1,this.fadeOutShadow(),this.isReady=!0;var t=this.leftPagesArr[this.leftPagesArr.length-1];if(this.leftPagesArr.length&&t.parent!=this.book){for(;this.book.numChildren;)this.book.removeChildAt(0);this.rightPagesArr.length&&this.rightPagesArr[0].parent!=this.book&&this.book.addChild(this.rightPagesArr[0]),this.book.addChild(t),this.currentPaper=t,0<=this.leftPagesArr.length-2&&this.leftPagesArr[this.leftPagesArr.length-2].parent!=this.book&&this.book.addChild(this.leftPagesArr[this.leftPagesArr.length-2])}this.rightPagesArr.unshift(this.leftPagesArr.pop()),this.leftPagesArr.length&&this.book.setChildIndex(this.leftPagesArr[this.leftPagesArr.length-1],this.book.numChildren-1),this.rightPagesArr.length&&this.book.setChildIndex(this.rightPagesArr[0],this.book.numChildren-1),null!=this.currentPaper&&this.currentPaper.setCor("BR"),this.pageComplete(2),this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this),this._currPage-=1,this.moveEnd()},e.prototype.autoCompleteL=function(){if(this.fadeOutShadow(),this.isDown=!1,this.isReady=!0,this.rightPagesArr[0].parent!=this.book){for(;this.book.numChildren;)this.book.removeChildAt(0);this.leftPagesArr.length&&this.leftPagesArr[this.leftPagesArr.length-1].parent!=this.book&&this.book.addChild(this.leftPagesArr[this.leftPagesArr.length-1]),1<this.rightPagesArr.length&&this.rightPagesArr[1].parent!=this.book&&this.book.addChild(this.rightPagesArr[1]),this.book.addChild(this.rightPagesArr[0]),this.currentPaper=this.rightPagesArr[0]}this.leftPagesArr.push(this.rightPagesArr[0]),this.rightPagesArr.shift(),this.leftPagesArr.length&&this.book.setChildIndex(this.leftPagesArr[this.leftPagesArr.length-1],this.book.numChildren-1),this.rightPagesArr.length&&this.book.setChildIndex(this.rightPagesArr[0],this.book.numChildren-1),this.currentPaper.setCor("BL"),this.pageComplete(1),this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this),this._currPage+=1,this.moveEnd()},e.prototype.getDir=function(t,e){return t>0?e>this.h>>1?"BR":"TR":e>this.h>>1?"BL":"TL"},e.prototype.resetFp=function(t){"TL"==t?(this.fp.x=-this.w,this.fp.y=0):"TR"==t?(this.fp.x=this.w,this.fp.y=0):"BL"==t?(this.fp.x=-this.w,this.fp.y=this.h):"BR"==t&&(this.fp.x=this.w,this.fp.y=this.h)},e.prototype.dragStart=function(t){this.dragMinNum>zmovie.Util.getDist(t.x,t.y,this.downPoint.x,this.downPoint.y)||(this.currentPaper=this.cp,this.isDragStart=!0,this.currentPaper.setCor(this.dir),this.book.setChildIndex(this.currentPaper,this.book.numChildren-1),this.fadeInShadow(),this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this),this.moveStart(this.dir))},e.prototype.updatefp=function(){this.isDown&&(this.fp.x+=.6*(this.tP.x-this.fp.x),this.fp.y+=.6*(this.tP.y-this.fp.y))},e.prototype.initDempP=function(t){"TL"==t?(this.dempP.x=-this.w,this.dempP.y=0):"TR"==t?(this.dempP.x=this.w,this.dempP.y=0):"BL"==t?(this.dempP.x=-this.w,this.dempP.y=this.h):"BR"==t&&(this.dempP.x=this.w,this.dempP.y=this.h)},e.prototype.pageComplete=function(t){1==t?(this.rightPagesArr.length>1&&this.rightPagesArr[1].parent!=this.book&&this.book.addChildAt(this.rightPagesArr[1],0),this.leftPagesArr.length>2&&this.leftPagesArr[this.leftPagesArr.length-3].parent==this.book&&this.book.removeChild(this.leftPagesArr[this.leftPagesArr.length-3])):(0<=this.leftPagesArr.length-2&&this.leftPagesArr[this.leftPagesArr.length-2].parent!=this.book&&this.book.addChildAt(this.leftPagesArr[this.leftPagesArr.length-2],0),this.rightPagesArr.length>2&&this.rightPagesArr[2].parent==this.book&&this.book.removeChild(this.rightPagesArr[2]))},e.prototype.gotoHSPoint=function(t){this.isReady&&(this.fp.x<=0?"TR"==t?(t="TL",this.leftPagesArr.push(this.rightPagesArr[0]),this.rightPagesArr.shift(),this.lrType=1):"BR"==t&&(t="BL",this.leftPagesArr.push(this.rightPagesArr[0]),this.rightPagesArr.shift(),this.lrType=1):"TL"==t?(t="TR",this.rightPagesArr.unshift(this.leftPagesArr[this.leftPagesArr.length-1]),this.leftPagesArr.splice(this.leftPagesArr.length-1,1),this.lrType=2):"BL"==t&&(t="BR",this.rightPagesArr.unshift(this.leftPagesArr[this.leftPagesArr.length-1]),this.leftPagesArr.splice(this.leftPagesArr.length-1,1),this.lrType=2),this.isReady=!1,this.initDempP(t),this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this))},e.prototype.complete=function(t){this.fadeOutShadow(),this.isReady=!0,this.leftPagesArr.length&&this.book.addChild(this.leftPagesArr[this.leftPagesArr.length-1]),this.rightPagesArr.length&&this.book.addChild(this.rightPagesArr[0]),0!=this.lrType&&(0<t.indexOf("R")?this._currPage-=1:this._currPage+=1,this.pageComplete(this.lrType),this.lrType=0),this.moveEnd()},e.prototype.moveStart=function(t){this.isMoveing=!0,this.dispatchEventWith(e.EVENT_PAGE_MOVIE_START,!1,t)},e.prototype.moveEnd=function(){this.isMoveing=!1,this.cp=null,this.dispatchEventWith(e.EVENT_PAGE_MOVIE_END,!1,this._currPage),this.nextCatch()},e.prototype.nextCatch=function(){if(null!=this.contralCatch&&0!=this.contralCatch.length){var t=this.contralCatch.shift();t()}},e.prototype.fadeInShadow=function(){},e.prototype.fadeOutShadow=function(){},e.prototype.update=function(){this.currentPaper&&(this.updatefp(),this.currentPaper.Update(this.fp))},e.EVENT_PAGE_MOVIE_END="EVENT_PAGE_MOVIE_END",e.EVENT_PAGE_MOVIE_START="EVENT_PAGE_MOVIE_START",e.EVENT_PAGE_CLICK="EVENT_PAGE_CLICK",e.EVENT_PAGE_ADD="EVENT_PAGE_ADD",e.EVENT_PAGE_REMOVE="EVENT_PAGE_REMOVE",e}(egret.DisplayObjectContainer);__reflect(ZFlipBook.prototype,"ZFlipBook");var zmovie;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._s=1,i.img=new egret.Bitmap,i.addChild(i.img),i.setTexture(e),i}return __extends(e,t),e.prototype.setTexture=function(t){this.img.texture=t},e.prototype.getTexture=function(){return this.img.texture},e.prototype.setScale=function(t){this._s=t,this.img.scaleX=1/t,this.img.scaleY=1/t},e.prototype.getScale=function(){return this._s},e.prototype.setP=function(t){null!=t&&(null!=t.x&&(this.img.x=t.x),null!=t.y&&(this.img.y=t.y))},e}(egret.DisplayObjectContainer);t.ZImage=e,__reflect(e.prototype,"zmovie.ZImage")}(zmovie||(zmovie={}));var CommonDragonBones=function(t){function e(){var e=t.call(this)||this;return e.displayDataAry=[],e.animationDataAry=new Object,e}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getDrgoneDisplay=function(t){var e,i=RES.getRes(t+"_ske_json"),n=RES.getRes(t+"_tex_json"),s=RES.getRes(t+"_tex_png");if(i&&n&&s){e=new dragonBones.EgretFactory,e.parseDragonBonesData(i),e.parseTextureAtlasData(n,s);var r=e.buildArmatureDisplay("Sprite");return r.name=t,r}return null},e.prototype.getfactoryAry=function(t,e){void 0===e&&(e="");var i=t.split(",");this.displayDataAry=[];for(var n=0;3>n;n++){t=1==i.length?i[0]:i[n];var s=t+"_yan",r=t+"_r",o=t+"_err",a=this.getDrgoneDisplay(s),h=this.getDrgoneDisplay(r),l=this.getDrgoneDisplay(o),c=[a,h,l];this.displayDataAry.push(c)}return this.displayDataAry},e.prototype.hideCurDisplayObj=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var s=this.displayDataAry[e];this.curIndex=e;for(var r,o,a=0,h=s;a<h.length;a++){var l=h[a];l&&(l.animation.stop(),l.visible=!1)}var c;r=s[0].x,o=s[0].y,i&&(c=s[1]),n&&(c=s[2]),c.x=r,c.y=o,c.visible=!0,t.addChild(c),c.animation.play(1,1),c.addEventListener(egret.Event.COMPLETE,this.loopComplete,this)},e.prototype.getMoviclip=function(t){var e=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),n=new egret.MovieClipDataFactory(e,i),s=new egret.MovieClip(n.generateMovieClipData(t));return s},e.prototype.textureSAnimation=function(t){},e.prototype.getElementImg=function(t,e){void 0===e&&(e=0);var i=new eui.Image;return i.texture=RES.getRes(t),null==i.texture?null:(0==e?(i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2):1==e&&(i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height),i.name=t,i)},e.prototype.getDisplayObj=function(t,e){var i=[],n=t+"_yan",s=t+"_r",r=t+"_err",o=this.getDrgoneDisplay(n),a=this.getDrgoneDisplay(s),h=this.getDrgoneDisplay(r);return o&&i.push(o),a&&i.push(a),h&&i.push(h),this.animationDataAry[e+""]=i,i},e.prototype.playChangeAnimatin=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var s=this.animationDataAry[e];if(s){this.curKey=e;for(var r=s[0].x,o=s[0].y,a=0,h=s;a<h.length;a++){var l=h[a];l&&l.animation&&(l.animation.stop(),l.visible=!1)}var c=s[i];c.x=r,c.y=o,c.visible=!0,t.addChild(c),c.animation.play(1,-1),t.moveImg&&(t.addChild(t.moveImg),t.addChild(t.img_che)),c.addEventListener(egret.Event.COMPLETE,this.changeloopComplete,this)}},e.prototype.playImgAnimation=function(t){t.visible=!1,this.curImg=t;var e=t.name+"_r",i=this.getDrgoneDisplay(e);this.curImgAnimation=i,i&&(i.x=t.x,i.y=t.y,i.scaleX=i.scaleY=.7,i.visible=!0,t.parent.addChild(i),i.animation.play(1,1),i.addEventListener(egret.Event.COMPLETE,this.onImgComplete,this))},e.prototype.dragondestroy=function(){for(var t in this.animationDataAry){var e=this.animationDataAry[t];if(t)for(var i=0,n=e;i<n.length;i++){var s=n[i];s.animation&&s.animation.stop(),s.parent&&s.parent.removeChild(s),s.dispose(),s=null}delete this.animationDataAry[t]}},e.prototype.getDisplayName=function(t){var e="";switch(t){case"1":e="laohu";break;case"2":e="laohu";break;case"3":e="laohu";break;case"4":e="laohu"}return t},e.prototype.loopComplete=function(){for(var t=this.displayDataAry[this.curIndex],e=0,i=t;e<i.length;e++){var n=i[e];n&&(n.animation.stop(),n.visible=!1)}t[0].visible=!0,t[0].animation.play(1,-1)},e.prototype.onImgComplete=function(){this.curImg.visible=!0,this.curImgAnimation&&this.curImgAnimation.parent&&(this.curImgAnimation.animation.stop(),this.curImgAnimation.visible=!1,this.curImgAnimation.parent.removeChild(this.curImgAnimation),this.curImgAnimation.dispose(),this.curImgAnimation=null)},e.prototype.changeloopComplete=function(){for(var t=this.animationDataAry[this.curKey],e=0,i=t;e<i.length;e++){var n=i[e];n&&(n.animation.stop(),n.visible=!1),n.hasEventListener(egret.Event.COMPLETE)&&n.removeEventListener(egret.Event.COMPLETE,this.changeloopComplete,this)}t[0].visible=!0,egret.Tween.get(t[0],{loop:!0}).wait(2e3).call(function(){t[0].animation.play()})},e}(UIObject);__reflect(CommonDragonBones.prototype,"CommonDragonBones");var zmovie;!function(t){var e=function(t){function e(e,i,n,s){var r=t.call(this)||this;return r._rotation=0/0,r.angle=0/0,r.wid=0/0,r.hei=0/0,r.targetPoint=new egret.Point,r.pa=e,r.pb=i,r.wid=n,r.hei=s,r.c_mc1=new egret.Sprite,r.c_mc2=new egret.Sprite,r.addChild(r.c_mc1),r.addChild(r.c_mc2),r.c_mc1.addChild(e),r.c_mc2.addChild(i),r.target=r.c_mc2,r}return __extends(e,t),Object.defineProperty(e.prototype,"_target",{get:function(){return this.target},enumerable:!0,configurable:!0}),e.prototype.setPageA=function(t){null!=this.pa.parent&&this.pa.parent.removeChild(this.pa),this.pa=t,this.c_mc1.addChild(t)},e.prototype.setPageB=function(t){null!=this.pb.parent&&this.pb.parent.removeChild(this.pb),this.pb=t,this.c_mc2.addChild(t)},e.prototype.flush_pa=function(){this.c_mc1.addChild(this.pa)},e.prototype.flush_pb=function(){this.c_mc2.addChild(this.pb)},e.prototype.updateRotation=function(t,e){this.angle=Math.atan2(this.targetPoint.y-e,this.targetPoint.x-t),this._rotation=this.target.rotation=2*this.angle},e.prototype.setCor=function(t){switch(t){case"TL":this.pb.x=-this.wid,this.pb.y=0,this.pa.x=-this.wid,this.pa.y=0,this.target=this.c_mc1,this.targetPoint.x=-this.wid,this.targetPoint.y=0,this.c_mc2.rotation=0,this.c_mc2.y=0,this.c_mc2.x=0,this.setChildIndex(this.c_mc1,this.numChildren-1);break;case"TR":this.pa.x=0,this.pa.y=0,this.c_mc1.x=0,this.c_mc1.y=0,this.pb.x=0,this.pb.y=0,this.target=this.c_mc2,this.targetPoint.x=this.wid,this.targetPoint.y=0,this.c_mc1.rotation=0,this.setChildIndex(this.c_mc2,this.numChildren-1);break;case"BL":this.pb.x=-this.wid,this.pb.y=0,this.pa.x=-this.wid,this.pa.y=-this.hei,this.target=this.c_mc1,this.targetPoint.x=-this.wid,this.targetPoint.y=this.hei,this.c_mc2.rotation=0,this.c_mc2.y=0,this.c_mc2.x=0,this.setChildIndex(this.c_mc1,this.numChildren-1);break;case"BR":this.pa.x=0,this.pa.y=0,this.c_mc1.x=0,this.c_mc1.y=0,this.pb.x=0,this.pb.y=-this.hei,this.target=this.c_mc2,this.targetPoint.x=this.wid,this.targetPoint.y=this.hei,this.c_mc1.rotation=0,this.c_mc1.y=0,this.c_mc1.x=0,this.setChildIndex(this.c_mc2,this.numChildren-1)}},e}(egret.Sprite);t.ZPage=e,__reflect(e.prototype,"zmovie.ZPage")}(zmovie||(zmovie={}));var ZPaper=function(t){function e(i,n,s,r){var o=t.call(this)||this;o.currentDir="right",o.MemoryDir="right",o.started=!1,o.pageA=i,o.pageB=n,o.w=s,o.h=r,o.img=e.getAlignTexture();var a=Math.sqrt(s*s+r*r),h=2*a;return o.img.scaleX=a/(.5*o.img.width),o.img.scaleY=h/o.img.height,o.img.anchorOffsetX=.5*o.img.width,o.img.anchorOffsetY=.5*o.img.height,o.addChild(o.img),o.lp=new zmovie.LimitPoint,o.lp.O=new egret.Point(0,r/2),o.lp.setSize(s,r,new egret.Point),o.pageMC=new zmovie.ZPage(i,n,s,r),o.pageMC.mask=o.img,o.addChild(o.pageMC),o.setCor("BR"),o}return __extends(e,t),Object.defineProperty(e.prototype,"mask_rotation",{get:function(){return this.img.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask_x",{get:function(){return this.img.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask_y",{get:function(){return this.img.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.pageMC._target.getChildAt(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changedPageNum",{get:function(){var t=this.lp.point.x;return Math.abs(t- -this.w)<3?"right"==this.MemoryDir?(this.MemoryDir="left",1):0:Math.abs(t-this.w)<3&&"left"==this.MemoryDir?(this.MemoryDir="right",-1):0},enumerable:!0,configurable:!0}),e.getAlignTexture=function(){var t=500,e=new egret.Shape;return e.graphics.beginFill(16711680,1),e.graphics.moveTo(t,t),e.graphics.lineTo(2*t,t),e.graphics.drawArc(t,t,t,Math.PI/2,Math.PI/2*3,!1),e.graphics.lineTo(t,t),e.graphics.endFill(),e},e.prototype.setCor=function(t){this.currentCor=t,this.pageMC.setCor(t),this.targetPage=this.pageMC._target,"TR"==t||"BR"==t?this.currentDir="right":this.currentDir="left","TL"==t||"TR"==t?(this.img.y=0,this.lp.changeTo("top")):(this.lp.changeTo("bottom"),this.img.y=this.h),this.fix(t)},e.prototype.show=function(){this.img.visible=this.visible=!0},e.prototype.hide=function(){this.img.visible=this.visible=!1},e.prototype.start=function(){this.close(),this.visible=!0},e.prototype.Update=function(t){this.lp.update(t.x,t.y),this.update()},e.prototype.close=function(){this.lp.close(),this.update()},e.prototype.getPageA=function(){return this.pageA},e.prototype.getPageB=function(){return this.pageB},e.prototype.setPageA=function(t){this.pageA=t,this.pageMC.setPageA(t)},e.prototype.setPageB=function(t){this.pageB=t,this.pageMC.setPageB(t)},e.prototype.flushPageA=function(){this.pageMC.flush_pa()},e.prototype.flushPageB=function(){this.pageMC.flush_pb()},e.prototype.fix=function(t){"TL"==t?(this.img.x=-this.w,this.img.y=0,this.img.rotation=180,this.targetPage.rotation=90,this.targetPage.x=-this.w):"TR"==t?(this.img.x=0,this.img.y=0,this.img.rotation=180,this.targetPage.rotation=0,this.targetPage.x=-this.w):"BL"==t?(this.img.x=0,this.img.rotation=0,this.targetPage.rotation=0,this.targetPage.x=this.w):"BR"==t&&(this.img.x=0,this.img.rotation=180,this.targetPage.rotation=0,this.targetPage.x=-this.w)},e.prototype.update=function(){this.targetPage.x=this.lp.point.x,this.targetPage.y=this.lp.point.y,this.pageMC.updateRotation(this.lp.point.x,this.lp.point.y);var t=Math.sin(2*this.pageMC.angle),e=0;"BR"==this.currentCor?(e=this.w-(this.h-this.lp.point.y)/t,t?this.img.x=e:this.img.x=this.w-(this.w-this.lp.point.x)/2,this.img.rotation=this.pageMC._rotation/2):"TR"==this.currentCor?(e=this.w- -this.lp.point.y/t,t?this.img.x=e:this.img.x=this.w-(this.w-this.lp.point.x)/2,this.img.rotation=this.pageMC._rotation/2):"TL"==this.currentCor?(e=this.lp.point.y/t-this.w,180==this.pageMC.angle?(this.img.x=(-this.w-this.lp.point.x)/2+this.lp.point.x,this.img.rotation=this.pageMC._rotation/2):t?(this.img.x=e,this.img.rotation=this.pageMC._rotation/2):(this.img.x=-this.w,this.img.rotation=180)):"BL"==this.currentCor&&(e=-this.w-(this.h-this.lp.point.y)/t,180==this.pageMC.angle?(this.img.x=(-this.w-this.lp.point.x)/2+this.lp.point.x,this.img.rotation=this.pageMC._rotation/2):t?(this.img.x=e,this.img.rotation=this.pageMC._rotation/2):(this.img.x=-this.w,this.img.rotation=180))},e}(egret.DisplayObjectContainer);__reflect(ZPaper.prototype,"ZPaper");var zmovie;!function(t){var e=function(){function t(){}return t.getObject=function(){return null!=t.poolObj&&0!=t.poolObj.length?t.poolObj.pop():{}},t.putObject=function(e){null==t.poolObj&&(t.poolObj=[]);for(var i in e)delete e[i];t.poolObj.push(e)},t.getPoint=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0==t.sPoints.length)return new egret.Point(e,i);var n=t.sPoints.pop();return n.x=e,n.y=i,n},t.putPoint=function(e){e&&t.sPoints.push(e)},t.sPoints=[],t}();t.ZPool=e,__reflect(e.prototype,"zmovie.ZPool")}(zmovie||(zmovie={}));var ZShap=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.draw=function(t){this.graphics.clear();for(var e,i=t.length,n=0;i>n;n++){var s=t[n];if("ef"==s)this.graphics.endFill();else if(null!=s.colors){var r=s.matrix,o=new egret.Matrix(r.a,r.b,r.c,r.d,r.tx,r.ty);this.graphics.beginGradientFill(s.type,s.colors,s.alphas,s.ratios,o)}else if(null!=s.color)this.graphics.beginFill(s.color,s.alpha);else if(null!=s.commands){var a=s.commands,h=s.data,l=a.length;e=0;for(var c=0;l>c;c++){var u=a[c];try{1==u?(this.graphics.moveTo(h[e],h[e+1]),e+=2):2==u?(this.graphics.lineTo(h[e],h[e+1]),e+=2):3==u?(this.graphics.curveTo(h[e],h[e+1],h[e+2],h[e+3]),e+=4):6==u&&(this.graphics.cubicCurveTo(h[e],h[e+1],h[e+2],h[e+3],h[e+4],h[e+5]),e+=6)}catch(p){}}}}},e}(egret.Shape);__reflect(ZShap.prototype,"ZShap");var ZTextField=function(t){function e(e,i,n,s,r,o,a,h,l,c,u){void 0===n&&(n=0),void 0===s&&(s=0/0),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=0/0),void 0===l&&(l=0/0),void 0===c&&(c=!0),void 0===u&&(u=null);var p=t.call(this)||this;if(p.width=s,p.size=i,p.textColor=n,p.bold=r,p.fontFamily=o,p.text=e,p.italic=u.tf.italic,p.textAlign=u.tf.align,null!=a)try{p.filters=zmovie.Util.getFilters(a)}catch(g){}return p}return __extends(e,t),e}(egret.TextField);__reflect(ZTextField.prototype,"ZTextField");var ZTextFieldDiv=function(){function t(){this.div=document.createElement("div"),this.div.style.position="absolute",this.div.style.textAlign="left",this.div.style.width="1000px";document.getElementById("bookValue").appendChild(this.div)}return Object.defineProperty(t.prototype,"x",{set:function(t){this.div.style.left=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{set:function(t){this.div.style.top=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{set:function(t){this.div.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{set:function(t){this.div.style.fontSize=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(t){t?this.div.style.display="":this.div.style.display="none"},enumerable:!0,configurable:!0}),t.prototype.resizeText=function(t,e,i){this.div.style.worldBreak="break-all",this.div.style.width=t+"px",this.div.innerHTML=i,this.cont=document.createElement("div"),this.cont.style.worldBreak="break-all",this.cont.style.width=t+"px",this.cont.style.textAlign="left",document.getElementById("bookValue").appendChild(this.cont);var n=new Array;return this.checkHTML(this.div,e,n),this.div.innerHTML="",this.cont.innerHTML="",n},t.prototype.checkEndText=function(t,e,i){var n=t.length>>1,s=t.substring(0,n),r=t.substring(n);e.innerHTML=s;var o=0;if(this.cont.offsetHeight>i)o=this.checkEndText(s,e,i);else{n=r.length>>1;var a=r.substring(0,n);r.substring(n);e.innerHTML=s+a,this.cont.offsetHeight>i?(e.innerHTML=s,o=s.length):o=s.length+a.length}return o},t.prototype.checkTextHeight=function(t,e,i,n){for(;;){if(e.innerHTML=t,!(this.cont.offsetHeight>i))break;var s=this.checkEndText(t,e,i);n.push(this.cont.innerHTML),this.cont.innerHTML="",t.substring(s),e=document.createElement("spine"),this.cont.appendChild(e)}},t.prototype.checkHTML=function(t,e,i){if("#text"==t.nodeName){console.log(t.nodeValue);var n=document.createElement("spine");this.cont.appendChild(n),this.checkTextHeight(t.nodeValue,n,e,i)}else{("BR"==t.nodeName||"P"==t.nodeName)&&(this.cont.appendChild(document.createElement(t.nodeName)),e<=this.cont.offsetHeight&&(i.push(this.cont.innerHTML),this.cont.innerHTML="")),console.log(t.nodeName);for(var s=t.childNodes,r=s.length,o=0;r>o;o++)this.checkHTML(s[o],e,i)}},t}();__reflect(ZTextFieldDiv.prototype,"ZTextFieldDiv");var ztiledmap;!function(t){var e=function(){function t(t){this._heuristic=this.diagonal,this._straightCost=1,this._diagCost=Math.SQRT2,this.tmw=t}return t.prototype.search=function(t,e){return this.initCatch(),e=this.tmw.opintToTiledPoint(e),this.tmw.getIsStopMove(e.x,e.y)?(console.log("这里禁止移动"),null):(this.endO=this.getObject(e.x,e.y),t=this.tmw.opintToTiledPoint(t),this.startO=this.getObject(t.x,t.y),null==this._open?(this._open=new Array,this._closed=new Array,this._path=new Array):(this._open.splice(0,this._open.length),this._closed.splice(0,this._closed.length),this._path.splice(0,this._path.length)),this.startO.g=0,this.startO.h=this._heuristic(this.startO),this.startO.f=this.startO.g+this.startO.h,this.start())},t.prototype.initCatch=function(){null==this.xyObjCatch&&(this.xyObjCatch={});for(var t in this.xyObjCatch){var e=this.xyObjCatch[t];for(var i in e){var n=e[i];zmovie.ZPool.putObject(n)}zmovie.ZPool.putObject(e),delete this.xyObjCatch[t]}},t.prototype.diagonal=function(t){var e=Math.abs(t.x-this.endO.x),i=Math.abs(t.y-this.endO.y),n=Math.min(e,i),s=e+i;return this._diagCost*n+this._straightCost+(s-2*n)},t.prototype.getObject=function(t,e){var i=this.xyObjCatch[t];
return null==i&&(i=zmovie.ZPool.getObject(),this.xyObjCatch[t]=i),null==i[e]&&(i[e]=zmovie.ZPool.getObject(),i[e].x=t,i[e].y=e),i[e]},t.prototype.start=function(){for(var t=this.startO;t!=this.endO;){for(var e=t,i=0;7>=i;i++)if(e=this.check(e,i),!this.tmw.getIsStopMove(e.x,e.y)){var n=this._straightCost;(t.x==e.x||t.y==e.y)&&(n=this._diagCost);var s=t.g+n,r=0;r=null==e.h?this._heuristic(e):e.h;var o=s+r;this.isOpen(e)||this.isClose(e)?e.f>o&&(e.f=o,e.g=s,e.parent=t):(e.f=o,e.g=s,e.h=r,e.parent=t,this._open.push(e))}if(this._closed.push(t),0==this._open.length)return console.log("no path found"),null;this._open.sort(this.sortFun),t=this._open.shift()}return this.buildPath(),this._path},t.prototype.buildPath=function(){var t=this.endO;for(this._path.push(t);t!=this.startO;)t=t.parent,this._path.unshift(t)},t.prototype.sortFun=function(t,e){return t.f>e.f?1:t.f<e.f?-1:0},t.prototype.isOpen=function(t){return 0>this._open.indexOf(t)?!1:!0},t.prototype.isClose=function(t){return 0>this._closed.indexOf(t)?!1:!0},t.prototype.check=function(t,e){var i;return 0==e?i=this.getObject(t.x,t.y-this.tmw.size):1==e||2==e?i=this.getObject(t.x+this.tmw.size,t.y+this.tmw.hsize):3==e||4==e?i=this.getObject(t.x-this.tmw.size,t.y+this.tmw.hsize):5==e||6==e?i=this.getObject(t.x-this.tmw.size,t.y-this.tmw.hsize):7==e&&(i=this.getObject(t.x+this.tmw.size,t.y-this.tmw.hsize)),i},t}();t.AStart=e,__reflect(e.prototype,"ztiledmap.AStart")}(ztiledmap||(ztiledmap={}));var ztiledmap;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i}return t}();t.Point3D=e,__reflect(e.prototype,"ztiledmap.Point3D")}(ztiledmap||(ztiledmap={}));var ztiledmap;!function(t){var e=function(e){function i(t,i,n,s){void 0===n&&(n=null),void 0===s&&(s=1);var r=e.call(this,t,i,n,s)||this;return r.tx=0/0,r.ty=0/0,r.size=0,r.hsize=0,r.nsize=0,r.p=new egret.Point,r}return __extends(i,e),Object.defineProperty(i.prototype,"x",{get:function(){return e.prototype.$getX.call(this)},set:function(t){t!=e.prototype.$getX.call(this)&&(this._depth=0/0,e.prototype.$setX.call(this,t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return e.prototype.$getY.call(this)},set:function(t){t!=e.prototype.$getY.call(this)&&(this._depth=0/0,e.prototype.$setY.call(this,t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"depth",{get:function(){if(isNaN(this._depth)){var t=zmovie.Util.screenToIso(new egret.Point(this.x,this.y));t.x=Math.round(t.x/this.size)*this.size,t.y=Math.round(t.y/this.size)*this.size,t.z=Math.round(t.z/this.size)*this.size,this._depth=.866*(t.x+t.z)-.707*t.y,this.depthPos=t}return this._depth},enumerable:!0,configurable:!0}),i.prototype.moveTo=function(e){null==this.tml&&(this.tml=new t.TiledMoveLogic(this)),this.tml.moveTo(e)},i.prototype.tiledObj=function(t,e,i){this.id=i,this.tmw=e;var n=this.mcObj.tmo;null!=n&&(this.anchorOffsetX=n.px,this.anchorOffsetY=n.py,this.size=n.size,this.hsize=.5*this.size,this.nsize=3*this.size),this.x=t.x,this.y=t.y,this.tx=t.x,this.ty=t.y,this.tiv=null},i.prototype.getTiledV=function(){if(null==this.tiv){this.tiv=new Array;for(var t=this.mcObj.tmo,e=this.tx-t.px+t.x,i=this.ty-t.py+t.y,n=new egret.Point(e,i),s=t.xnum,r=t.ynum,o=n.y,a=n.x;;){var h=this.tmw.getFloorObjByPosition(n.x,n.y);if(this.tiv.push(h),n.x-=this.size,n.y+=this.hsize,r-=1,0>=r){if(s-=1,0>=s)break;r=t.ynum,a+=this.size,n.x=a,o+=this.hsize,n.y=o}}}return this.tiv},i.prototype.checkNearDepth=function(t){if(null!=this.checkDepthCatch){var e=this.checkDepthCatch[t.id];if(null!=e&&e.x==t.tx&&e.y==t.ty&&e.ix==this.tx&&e.iy==this.ty)return e.depth}for(var i,n,s=this.getTiledV(),r=t.getTiledV(),o=0/0,a=s.length-1;a>=0;a--)for(var h=s[a],l=r.length-1;l>=0;l--){var c=r[l],u=zmovie.Util.getDist(h.x,h.y,c.x,c.y);(isNaN(o)||o>u)&&(o=u,i=h,n=c)}if(this.nsize>o){if(i.depth>n.depth)return this.setCatch(t,1);if(i.depth<n.depth)return this.setCatch(t,-1)}return this.setCatch(t,0)},i.prototype.setCatch=function(t,e,i){void 0===i&&(i=!0),null==this.checkDepthCatch&&(this.checkDepthCatch={});var n=this.checkDepthCatch[t.id];return null==n&&(n={},this.checkDepthCatch[t.id]=n),n.x=t.tx,n.y=t.ty,n.ix=this.tx,n.iy=this.ty,n.depth=e,i&&t.setCatch(this,-1*e,!1),e},i}(zmovie.ZMovieClip);t.TiledMapDisplay=e,__reflect(e.prototype,"ztiledmap.TiledMapDisplay")}(ztiledmap||(ztiledmap={}));var ztiledmap;!function(t){var e=function(e){function i(t,i,n){void 0===n&&(n=null);var s=e.call(this)||this;s.size=0/0,s.hsize=0/0,s.px=0/0,s.py=0/0,s.downX=0/0,s.downY=0/0,s.srcX=0/0,s.srcY=0/0,s.sortID=0,s.gp=new egret.Point;var r=i.tileMap;if(null==r)return s;var o;if(null==n)for(o in r){n=o;break}if(null==r[n])return s;s.imgArr=t,s.mcName=n,s.libObj=i,s.mcObj=zmovie.Util.clone(r[n]),s._floor=new egret.Sprite,s.addChild(s._floor),s._world=new egret.Sprite,s.addChild(s._world);s.mcObj.xnum,s.mcObj.ynum;s.size=s.mcObj.size,s.hsize=.5*s.size;var a=new zmovie.ZMovieClip(t,s.libObj,s.mcObj.defT);if(1==a.totalFrame&&1==a.numChildren){var h=a.getChildAt(0);null!=h&&(s.defT=h.getTexture(),s.defTS=h.getScale(),s.px=h.width>>1,s.py=h.height>>1)}return a.dispose(),s.pKeyObj={},s.showIdCatch={},s.tiledV=[],s.currShow=[],s.addEventListener(egret.Event.ADDED_TO_STAGE,s.stageHandle,s),s}return __extends(i,e),i.prototype.setTobj=function(t,e,i){var n=this.mcObj.tobj[t];null==n&&(n={},this.mcObj.tobj[t]=n),n[e]=i},i.prototype.removeTobj=function(t,e){var i=this.mcObj.tobj[t],n=null;return null!=i&&(n=i[e],null!=n&&(delete i[e],zmovie.Util.isObjContent(i)||delete this.mcObj.tobj[t])),n},i.prototype.checkIsShow=function(t){if(null!=this.currShowBuild){var e,i=this.getFloorObjByPosition(t.tx,t.ty,!1);null==i||null==i.d||null==i.d.parent?null!=t.parent&&(e=this.currShowBuild.indexOf(t),e>=0&&this.currShowBuild.splice(e,1),t.parent.removeChild(t),t.stop()):null==t.parent&&(e=this.currShowBuild.indexOf(t),0>e&&this.currShowBuild.push(t),this._world.addChild(t),t.isMovie()&&t.play())}},i.prototype.astart=function(e,i){return null==this._astart&&(this._astart=new t.AStart(this)),this._astart.search(e,i)},i.prototype.sort=function(t){if(void 0===t&&(t=10),0==t||0==this.sortID){if(egret.clearTimeout(this.sortID),0!=t)return void(this.sortID=egret.setTimeout(this.sort,this,t,0));if(this.sortID=0,null!=this.currShowBuild){this.currShowBuild.sort(this.sortDepth),this.checkNearDepth();for(var e=this.currShowBuild.length,i=0;e>i;i++)this._world.setChildIndex(this.currShowBuild[i],i)}}},i.prototype.formatPoint=function(t){0!=t.x%1&&(t.x=Math.ceil(t.x),0>t.x&&(t.x-=1),t.x=Math.floor(t.x/this.size)*this.size),0!=t.y%1&&(t.y=Math.ceil(t.y),0>t.y&&(t.y-=1),t.y=Math.floor(t.y/this.hsize)*this.hsize)},i.prototype.opintToTiledPoint=function(t){var e=zmovie.Util.screenToIso(t);e.x=Math.round(e.x/this.size)*this.size,e.y=Math.round(e.y/this.size)*this.size,e.z=Math.round(e.z/this.size)*this.size;Math.floor(e.x/this.size),Math.floor(e.z/this.size);return t=zmovie.Util.isoToScreen(e),this.formatPoint(t),t},i.prototype.getIsStopMove=function(t,e){t=t,e=e;var i=this.getTobj(t,e);if(null!=i){var n=this.getContentObjById(i);if(null!=n&&null==n.noStop)return!0}return!1},i.prototype.getTobj=function(t,e){var i=this.mcObj.tobj[t];return null!=i?i[e]:null},i.prototype.flush=function(){if(null!=this.stage){var t=this.globalToLocal(this.gp.x,this.gp.y),e=0,i=0,n=this.globalToLocal(this.gp2.x,this.gp2.y);t.x-=5*this.size,t.y-=5*this.hsize,n.x+=10*this.size,n.y+=10*this.hsize;var s,r=new Array,o=new Array;t=this.opintToTiledPoint(t);var a=!0;i=t.y,e=t.x;for(var h;;){var l=this.getFloorObjByPosition(t.x,t.y);if(this.createTiledDisplay(l),s=l.d,null==s.parent&&this._floor.addChild(s),null!=this.mcObj&&null!=this.mcObj.tobj){var c=this.mcObj.tobj[t.x];if(null!=c&&(c=c[t.y],null!=c)){var u=this.showContent(c);if(null==u.parent&&(h=!0,this._world.addChild(u),u.isMovie()&&u.play()),0>o.indexOf(u)&&o.push(u),null!=this.currShowBuild){var p=this.currShowBuild.indexOf(u);p>=0&&this.currShowBuild.splice(p,1)}}}if(null!=this.currShow){var g=this.currShow.indexOf(l);g>=0&&this.currShow.splice(g,1)}if(r.push(l),t.x+=this.size,a?t.y=i+this.hsize:t.y=i,a=!a,t.x>=n.x&&(t.x=e,i+=this.size,t.y=i,a=!0,t.y>=n.y))break}var m=0;if(null!=this.currShow)for(m=this.currShow.length-1;m>=0;m--)s=this.currShow[m].d,null!=s.parent&&s.parent.removeChild(s);if(this.currShow=r,null!=this.currShowBuild)for(m=this.currShowBuild.length-1;m>=0;m--)if(s=this.currShowBuild[m],null!=s.parent&&(s.parent.removeChild(s),s instanceof zmovie.ZMovieClip)){var d=s;d.stop()}this.currShowBuild=o,h&&this.sort()}},i.prototype.createFloor=function(e,i){var n=new t.TiledObj(this.size);this.tiledV.push(n);var s=this.pKeyObj[e];return null==s&&(s={},this.pKeyObj[e]=s),s[i]=n,n.x=e,n.y=i,n},i.prototype.getContentObjById=function(t){return this.mcObj.cont[t]},i.prototype.getFloorObjById=function(t){return null!=this.showIdCatch[t]?this.showIdCatch[t]:this.showContent(t)},i.prototype.getFloorObjByPosition=function(t,e,i){void 0===i&&(i=!0);var n=null,s=this.pKeyObj[t];return null!=s&&(n=s[e]),null==n&&i&&(n=this.createFloor(t,e)),n},i.prototype.dispose=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.stageHandle,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.stageHandle,this),null!=this.parent&&this.parent.removeChild(this),null!=this.s&&(this.s.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.s.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandle,this))},i.prototype.touchHandle=function(t){egret.TouchEvent.TOUCH_BEGIN==t.type?(this.srcX=this.x,this.srcY=this.y,this.downX=t.stageX,this.downY=t.stageY,this.isMove=!1):egret.TouchEvent.TOUCH_MOVE==t.type&&(this.isMove||(5<Math.abs(t.stageX-this.downX)||5<Math.abs(t.stageY-this.downY))&&(this.isMove=!0),this.x=this.srcX+(t.stageX-this.downX),this.y=this.srcY+(t.stageY-this.downY),this.flush())},i.prototype.checkNearDepth=function(){for(var t=this.currShowBuild.length,e=t-1;e>=0;e--)for(var i=e-1;i>=0;i--){var n=this.currShowBuild[e].checkNearDepth(this.currShowBuild[i]);if(-1==n){var s=this.currShowBuild[e];this.currShowBuild[e]=this.currShowBuild[i],this.currShowBuild[i]=s,e=t;break}}},i.prototype.sortDepth=function(t,e){return t.depth>e.depth?1:t.depth<e.depth?-1:t.depthPos.x>e.depthPos.x?1:t.depthPos.x<e.depthPos.x?-1:0},i.prototype.stageHandle=function(t){t.type==egret.Event.REMOVED_FROM_STAGE?(null!=this.s&&(this.s.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.s.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandle,this)),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.stageHandle,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.stageHandle,this)):(this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.stageHandle,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.stageHandle,this),this.s=this.stage,this.s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.s.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandle,this),null==this.gp2&&(this.gp2=new egret.Point(this.stage.stageWidth,this.stage.stageHeight)),this.flush())},i.prototype.createTiledDisplay=function(t){if(null==t.d){var e;null!=this.defT?(e=new egret.Bitmap(this.defT),e.scaleX/=this.defTS,e.scaleY/=this.defTS,e.anchorOffsetX=this.px,e.anchorOffsetY=this.py,e.x=t.x,e.y=t.y,t.d=e):(e=new egret.Bitmap,t.d=e)}},i.prototype.showContent=function(e){if(null!=this.showIdCatch[e])return this.showIdCatch[e];var i;try{var n=this.mcObj.cont[e];i=new t.TiledMapDisplay(this.imgArr,this.libObj,n.libName),i.tiledObj(n,this,e),this.showIdCatch[e]=i}catch(s){}return i},i}(egret.DisplayObjectContainer);t.TiledMapWorld=e,__reflect(e.prototype,"ztiledmap.TiledMapWorld")}(ztiledmap||(ztiledmap={}));var ztiledmap;!function(t){var e=function(){function t(t){this.speed=0/0,this.cspeed=0/0,this.ci=0,this.len=0,this.angle=0/0,this.vx=0/0,this.vy=0/0,this.tmd=t,this.speed=3,this.cspeed=2*this.speed,this.dir="下"}return t.prototype.clearMove=function(){if(null!=this.movePath){for(var t=this.movePath.length-1;t>=0;t--)zmovie.ZPool.putPoint(this.movePath[t]);this.movePath.splice(0,this.movePath.length)}this.toP=null,this.stop()},t.prototype.moveTo=function(t){var e=this.tmd.tmw,i=0;if(null==this.movePath?this.movePath=new Array:this.clearMove(),null!=e){null==this.fp?this.fp=new egret.Point(this.tmd.x,this.tmd.y):(this.fp.x=this.tmd.x,this.fp.y=this.tmd.y);var n=e.astart(this.fp,t);if(null!=n){for(i=n.length-1;i>=0;i--){var s=n[i];this.movePath.unshift(zmovie.ZPool.getPoint(s.x,s.y))}this.ci=0,this.len=this.movePath.length,this.startMove()}else this.stopMove()}},t.prototype.turnUp=function(t){this.dir="u",this.tmd.getIsExistLabel(t+"上")&&this.tmd.gotoAndPlayLabel(t+"上")},t.prototype.turnDown=function(t){this.dir="d",this.tmd.getIsExistLabel(t+"下")&&this.tmd.gotoAndPlayLabel(t+"下")},t.prototype.advanceTime=function(){if(this.cspeed>Math.abs(this.toP.x-this.tmd.x)?this.tmd.x=this.toP.x:this.tmd.x+=this.vx,this.cspeed>Math.abs(this.toP.y-this.tmd.y)?this.tmd.y=this.toP.y:this.tmd.y+=this.vy,this.tmd.x==this.toP.x&&this.tmd.y==this.toP.y)this.isSetTP||this.setTp(),this.startMove();else if(!this.isSetTP){var t=zmovie.Util.getDist(this.tmd.x,this.tmd.y,this.toP.x,this.toP.y);this.tmd.hsize>t&&this.setTp()}},t.prototype.stop=function(){egret.clearInterval(this.intkey),this.intkey=0/0},t.prototype.play=function(){isNaN(this.intkey)&&(this.intkey=egret.setInterval(this.advanceTime,this,10))},t.prototype.stopMove=function(){var t="待机";"l"==this.dir?this.turnLeft(t):"r"==this.dir?this.turnRight(t):"d"==this.dir?this.turnDown(t):"u"==this.dir&&this.turnUp(t),this.stop()},t.prototype.turnLeft=function(t){this.dir="l",this.tmd.getIsExistLabel(t+"左")?(this.tmd.direction=1,this.tmd.gotoAndPlayLabel(t+"左")):this.tmd.getIsExistLabel(t+"右")&&(this.tmd.gotoAndPlayLabel(t+"右"),this.tmd.direction=-1)},t.prototype.turnRight=function(t){this.dir="r",this.tmd.getIsExistLabel(t+"左")?(this.tmd.direction=-1,this.tmd.gotoAndPlayLabel(t+"左")):this.tmd.getIsExistLabel(t+"右")&&(this.tmd.gotoAndPlayLabel(t+"右"),this.tmd.direction=1)},t.prototype.startMove=function(){if(this.ci>=this.len)return void this.stopMove();this.toP=this.movePath[this.ci],this.isSetTP=!1;var t="走";Math.abs(this.toP.x-this.tmd.x)>Math.abs(this.toP.y-this.tmd.y)?this.toP.x<this.tmd.x?this.turnLeft(t):this.turnRight(t):this.toP.y<this.tmd.y?this.turnUp(t):this.turnDown(t);var e=this.toP.x-this.tmd.x,i=this.toP.y-this.tmd.y;this.angle=Math.atan2(i,e),this.vx=Math.cos(this.angle)*this.speed,this.vy=Math.sin(this.angle)*this.speed,this.ci++,this.play()},t.prototype.setTp=function(){this.isSetTP=!0;var t=this.tmd.tmw,e=t.removeTobj(this.tmd.tx,this.tmd.ty);null!=e&&(t.setTobj(this.toP.x,this.toP.y,e),this.tmd.tx=this.toP.x,this.tmd.ty=this.toP.y,this.tmd.tiv=null,t.checkIsShow(this.tmd)),null!=this.tmd.parent&&this.tmd.tmw.sort(0)},t}();t.TiledMoveLogic=e,__reflect(e.prototype,"ztiledmap.TiledMoveLogic")}(ztiledmap||(ztiledmap={}));var ztiledmap;!function(t){var e=function(){function t(t){this.size=t}return Object.defineProperty(t.prototype,"depth",{get:function(){if(!isNaN(this._depth))return this._depth;var t=zmovie.Util.screenToIso(new egret.Point(this.x,this.y));return t.x=Math.round(t.x/this.size)*this.size,t.y=Math.round(t.y/this.size)*this.size,t.z=Math.round(t.z/this.size)*this.size,this._depth=.866*(t.x+t.z)-.707*t.y,this.depthPos=t,this._depth},enumerable:!0,configurable:!0}),t}();t.TiledObj=e,__reflect(e.prototype,"ztiledmap.TiledObj")}(ztiledmap||(ztiledmap={}));var CoursewareSoundManager=function(){function t(){this._volume=1,this._effectVolume=1,this._musicName="",this._musicTurn=!0,this._effectTurn=!0,this._position=0,this._musicDict={}}return Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this.changeVolume())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectVolume",{get:function(){return this._effectVolume},set:function(t){this._effectVolume!=t&&(this._effectVolume=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"musicTurn",{get:function(){return this._musicTurn},set:function(t){this._musicTurn!=t&&(this._musicTurn=t,t?this.continueMusic():this.pauseMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectTurn",{get:function(){return this._effectTurn},set:function(t){this._effectTurn!=t&&(this._effectTurn=t)},enumerable:!0,configurable:!0}),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.playMusic=function(t){0!=this._musicTurn&&(this._musicChannel&&(this._musicChannel.stop(),this._musicChannel=null),this._musicSound=this.getSound(t),this._musicName=t,this._musicSound?(this._musicChannel=this._musicSound.play(),this._musicChannel.volume=this.volume):RES.getResAsync(t,this.loadMusicComplete,this))},t.prototype.pauseMusic=function(){this._musicChannel&&(this._position=this._musicChannel.position,this._musicChannel.stop(),this._musicChannel=null)},t.prototype.continueMusicK=function(){""!=this._musicName&&this.playMusic(this._musicName)},t.prototype.continueMusic=function(){this._musicSound&&this._musicTurn&&(this._musicChannel&&(this._musicChannel.stop(),this._musicChannel=null),this._musicChannel=this._musicSound.play(this._position),this._musicChannel.volume=this.volume)},t.prototype.loadMusicComplete=function(t){t&&(this._musicSound=t,this._musicChannel=this._musicSound.play(),this._musicChannel.volume=this.volume)},t.prototype.playEffect=function(t){if(0!=this._effectTurn){var e=this.getSound(t);e?(this._effectChanel=e.play(0,1),this._effectChanel.volume=this._effectVolume):RES.getResAsync(t,this.loadEffectComplete,this)}},t.prototype.loadEffectComplete=function(t){t&&(this._effectChanel=t.play(0,1),this._effectChanel.volume=this._effectVolume)},t.prototype.getSound=function(t){var e;return this._musicDict.hasOwnProperty(t)?e=this._musicDict[t]:RES.hasRes(t)&&(e=RES.getRes(t)),e},t.prototype.changeVolume=function(){this._musicChannel&&(this._musicChannel.volume=this._volume)},t}();__reflect(CoursewareSoundManager.prototype,"CoursewareSoundManager");var GameSound=function(){function t(){}return t.playMusic=function(t){SoundManager.getInstance().playMusic(t)},t.playEffect=function(t){SoundManager.getInstance().playEffect(t)},t.pauseMusic=function(){SoundManager.getInstance().pauseMusic()},t.continueMusic=function(){SoundManager.getInstance().continueMusicK()},t.setSound=function(t){SoundManager.getInstance().musicTurn=t,SoundManager.getInstance().effectTurn=t},t}();__reflect(GameSound.prototype,"GameSound");